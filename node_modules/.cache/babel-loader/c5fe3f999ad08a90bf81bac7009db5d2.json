{"ast":null,"code":"import _regeneratorRuntime from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import Statistics from\"./Statistics\";import Chart from\"./Chart\";import{UncontrolledDropdown,DropdownToggle,DropdownMenu,DropdownItem}from\"reactstrap\";import{Calendar}from\"react-feather\";import Loader from\"../../components/Loader\";import Request from\"../../requests/analytics\";import{RefreshButton}from\"../../components/RefreshButton\";var Analytics=function Analytics(_ref){var title=_ref.title,index=_ref.index;var text=[\"Today   \",\"Last 7 Days\",\"Last 30 days\",\"Last 90 Days\"];var _Request=Request(),analyticsBreakdown=_Request.analyticsBreakdown,userAnalytics=_Request.userAnalytics;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),breakdown=_useState2[0],setBreakdown=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),stats=_useState4[0],setStats=_useState4[1];var _useState5=useState(30),_useState6=_slicedToArray(_useState5,2),days=_useState6[0],setDays=_useState6[1];var _useState7=useState(text[2]),_useState8=_slicedToArray(_useState7,2),filterText=_useState8[0],setFilterText=_useState8[1];var fetchBreakdownData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return analyticsBreakdown();case 2:response=_context.sent;if(response.code===\"00\"){setBreakdown([response.data.consumers,response.data.agents]);}case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchBreakdownData(){return _ref2.apply(this,arguments);};}();var getAnalytics=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return userAnalytics(days);case 2:response=_context2.sent;if(response.code===\"00\"){setStats([response.data.consumers,response.data.agents]);console.log(response.data);}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function getAnalytics(){return _ref3.apply(this,arguments);};}();var refresh=function refresh(){setBreakdown(null);setStats(null);fetchBreakdownData();getAnalytics();};var updateDays=function updateDays(day,index){if(filterText!==text[index]){setStats(null);setDays(day);setFilterText(text[index]);}};useEffect(function(){fetchBreakdownData();},[]);useEffect(function(){getAnalytics();},[days]);return/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:\"8rem\"}},/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:\"10px\"}},/*#__PURE__*/React.createElement(\"p\",{style:{color:\"#304762\",fontSize:\"20px\"}},\"Settl \",title,\" Analytics\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(RefreshButton,{next:refresh}),/*#__PURE__*/React.createElement(UncontrolledDropdown,{className:\"d-inline filter-dropdown\"},/*#__PURE__*/React.createElement(DropdownToggle,{caret:true,color:\"light\",className:\"shadow-sm\",style:{backgroundColor:\"white\"}},/*#__PURE__*/React.createElement(Calendar,{className:\"feather align-middle mt-n1\"}),\" \",filterText),/*#__PURE__*/React.createElement(DropdownMenu,{right:true,style:{top:\"25px\"}},/*#__PURE__*/React.createElement(DropdownItem,{onClick:function onClick(){return updateDays(1,0);}},\"Today\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:function onClick(){return updateDays(7,1);}},\"Last 7 Days\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:function onClick(){return updateDays(30,2);}},\"Last 30 Days\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:function onClick(){return updateDays(90,3);}},\"Last 90 Days\"),/*#__PURE__*/React.createElement(DropdownItem,{divider:true}),/*#__PURE__*/React.createElement(DropdownItem,null,\"Customize\"))))),!stats?/*#__PURE__*/React.createElement(Loader,null):/*#__PURE__*/React.createElement(Statistics,{stats:stats[index],index:index}),!breakdown?/*#__PURE__*/React.createElement(Loader,null):/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:\"2rem\"}},/*#__PURE__*/React.createElement(Chart,{breakdown:breakdown[index]})));};export default Analytics;","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/src/pages/settl-analytics/Analytics.js"],"names":["React","useEffect","useState","Statistics","Chart","UncontrolledDropdown","DropdownToggle","DropdownMenu","DropdownItem","Calendar","Loader","Request","RefreshButton","Analytics","title","index","text","analyticsBreakdown","userAnalytics","breakdown","setBreakdown","stats","setStats","days","setDays","filterText","setFilterText","fetchBreakdownData","response","code","data","consumers","agents","getAnalytics","console","log","refresh","updateDays","day","marginTop","display","justifyContent","alignItems","marginBottom","color","fontSize","backgroundColor","top"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Statistics from \"./Statistics\";\nimport Chart from \"./Chart\";\nimport {\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n} from \"reactstrap\";\nimport { Calendar } from \"react-feather\";\nimport Loader from \"../../components/Loader\";\nimport Request from \"../../requests/analytics\";\nimport { RefreshButton } from \"../../components/RefreshButton\";\n\nconst Analytics = ({ title, index }) => {\n  const text = [\"Today   \", \"Last 7 Days\", \"Last 30 days\", \"Last 90 Days\"];\n  const { analyticsBreakdown, userAnalytics } = Request();\n  const [breakdown, setBreakdown] = useState(null);\n  const [stats, setStats] = useState(null);\n  const [days, setDays] = useState(30);\n  const [filterText, setFilterText] = useState(text[2]);\n\n  const fetchBreakdownData = async () => {\n    const response = await analyticsBreakdown();\n    if (response.code === \"00\") {\n      setBreakdown([response.data.consumers, response.data.agents]);\n    }\n  };\n  const getAnalytics = async () => {\n    const response = await userAnalytics(days);\n    if (response.code === \"00\") {\n      setStats([response.data.consumers, response.data.agents]);\n      console.log(response.data);\n    }\n  };\n  const refresh = () => {\n    setBreakdown(null);\n    setStats(null);\n    fetchBreakdownData();\n    getAnalytics();\n  };\n  const updateDays = (day, index) => {\n    if (filterText !== text[index]) {\n      setStats(null);\n      setDays(day);\n      setFilterText(text[index]);\n    }\n  };\n  useEffect(() => {\n    fetchBreakdownData();\n  }, []);\n  useEffect(() => {\n    getAnalytics();\n  }, [days]);\n  return (\n    <div\n      style={{\n        marginTop: \"8rem\",\n      }}\n    >\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\",\n          marginBottom: \"10px\",\n        }}\n      >\n        <p\n          style={{\n            color: \"#304762\",\n            fontSize: \"20px\",\n          }}\n        >\n          Settl {title} Analytics\n        </p>\n        <div>\n          <RefreshButton next={refresh} />\n          <UncontrolledDropdown className=\"d-inline filter-dropdown\">\n            <DropdownToggle\n              caret\n              color=\"light\"\n              className=\"shadow-sm\"\n              style={{\n                backgroundColor: \"white\",\n              }}\n            >\n              <Calendar className=\"feather align-middle mt-n1\" /> {filterText}\n            </DropdownToggle>\n            <DropdownMenu\n              right\n              style={{\n                top: \"25px\",\n              }}\n            >\n              <DropdownItem onClick={() => updateDays(1, 0)}>\n                Today\n              </DropdownItem>\n              <DropdownItem onClick={() => updateDays(7, 1)}>\n                Last 7 Days\n              </DropdownItem>\n              <DropdownItem onClick={() => updateDays(30, 2)}>\n                Last 30 Days\n              </DropdownItem>\n              <DropdownItem onClick={() => updateDays(90, 3)}>\n                Last 90 Days\n              </DropdownItem>\n              <DropdownItem divider />\n              <DropdownItem>Customize</DropdownItem>\n            </DropdownMenu>\n          </UncontrolledDropdown>\n        </div>\n      </div>\n      {!stats ? <Loader /> : <Statistics stats={stats[index]} index={index} />}\n\n      {!breakdown ? (\n        <Loader />\n      ) : (\n        <div\n          style={{\n            marginTop: \"2rem\",\n          }}\n        >\n          <Chart breakdown={breakdown[index]} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Analytics;\n"]},"metadata":{},"sourceType":"module"}