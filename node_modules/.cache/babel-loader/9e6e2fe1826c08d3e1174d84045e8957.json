{"ast":null,"code":"import _regeneratorRuntime from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Row,Col}from\"reactstrap\";import{TabContent,TabPane}from\"reactstrap\";import BarChart from\"./BarChart\";import Header from\"./Header\";import AppDownloads from\"./AppDownloads\";import Statistics from\"./Statistics\";import{RefreshButton}from\"../../../components/RefreshButton\";import{UncontrolledDropdown,DropdownToggle,DropdownMenu,DropdownItem}from\"reactstrap\";import{Calendar}from\"react-feather\";import Loader from\"../../../components/Loader\";import Request from\"../../../requests/analytics\";var Default=function Default(){var text=[\"Today   \",\"Last 7 Days\",\"Last 30 days\",\"Last 90 Days\"];var _Request=Request(),userAnalytics=_Request.userAnalytics;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),activeTab=_useState2[0],setActiveTab=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),userDetails=_useState4[0],setUserDetails=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),appDownloads=_useState6[0],setAppDownloads=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),chartsData=_useState8[0],setChartsData=_useState8[1];var _useState9=useState(30),_useState10=_slicedToArray(_useState9,2),days=_useState10[0],setDays=_useState10[1];var _useState11=useState(text[2]),_useState12=_slicedToArray(_useState11,2),filterText=_useState12[0],setFilterText=_useState12[1];var tabs=[\"Settl  Customers\",\"Settl Agents\"];var chartTitles=[{bar:\"Customer Transactions\",pie:\"App Downloads\"},{bar:\"Agent & Super Agent Transactions\",pie:\"Agent App Downloads\"}];var FetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return userAnalytics(days);case 2:response=_context.sent;console.log(response);if(!(response.code===\"00\")){_context.next=11;break;}_context.next=7;return setUserDetails([response.data.consumers,response.data.agents]);case 7:_context.next=9;return setAppDownloads([response.data.appDownloads.consumers,response.data.appDownloads.agents]);case 9:_context.next=11;return setChartsData([response.data.chartData.customer,response.data.chartData.agents]);case 11:case\"end\":return _context.stop();}}},_callee);}));return function FetchData(){return _ref.apply(this,arguments);};}();var refresh=function refresh(){setUserDetails(null);setAppDownloads(null);setChartsData(null);FetchData();};var updateDays=function updateDays(day,index){if(filterText!==text[index]){setChartsData(null);setAppDownloads(null);setDays(day);setFilterText(text[index]);}};useEffect(function(){FetchData();},[days]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"bg_absolute\"},/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"div\",{className:\"nav\"},tabs.map(function(tab,i){return/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return setActiveTab(i);},className:\"\".concat(activeTab===i?\"active_nav\":\"\")},/*#__PURE__*/React.createElement(\"p\",null,tab));}))),/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:\"8rem \"}},userDetails&&appDownloads&&chartsData?/*#__PURE__*/React.createElement(TabContent,{activeTab:activeTab},tabs.map(function(tab,i){return/*#__PURE__*/React.createElement(TabPane,{tabId:i,key:i},/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:\"10px\"}},/*#__PURE__*/React.createElement(\"p\",{style:{color:\"#304762\",fontSize:\"20px\"}},tab,\" Analytics\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(RefreshButton,{next:refresh}),/*#__PURE__*/React.createElement(UncontrolledDropdown,{className:\"d-inline filter-dropdown\"},/*#__PURE__*/React.createElement(DropdownToggle,{caret:true,color:\"light\",className:\"shadow-sm\",style:{backgroundColor:\"white\"}},/*#__PURE__*/React.createElement(Calendar,{className:\"feather align-middle mt-n1\"}),\" \",filterText),/*#__PURE__*/React.createElement(DropdownMenu,{right:true,style:{top:\"25px\"}},/*#__PURE__*/React.createElement(DropdownItem,{onClick:function onClick(){return updateDays(1,0);}},\"Today\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:function onClick(){return updateDays(7,1);}},\"Last 7 Days\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:function onClick(){return updateDays(30,2);}},\"Last 30 Days\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:function onClick(){return updateDays(90,3);}},\"Last 90 Days\"),/*#__PURE__*/React.createElement(DropdownItem,{divider:true}),/*#__PURE__*/React.createElement(DropdownItem,null,\"Customize\"))))),/*#__PURE__*/React.createElement(Statistics,{index:i,data:userDetails[i]}),/*#__PURE__*/React.createElement(Row,{style:{marginTop:\"2rem\"}},/*#__PURE__*/React.createElement(Col,{lg:\"7\",className:\"d-flex\"},/*#__PURE__*/React.createElement(BarChart,{title:chartTitles[i].bar,chartData:chartsData[i]})),/*#__PURE__*/React.createElement(Col,{lg:\"5\",className:\"d-flex\"},/*#__PURE__*/React.createElement(AppDownloads,{title:chartTitles[i].pie,downloads:appDownloads[i]}))));})):/*#__PURE__*/React.createElement(Loader,null)));};export default Default;","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/src/pages/dashboards/Default/index.js"],"names":["React","useState","useEffect","Row","Col","TabContent","TabPane","BarChart","Header","AppDownloads","Statistics","RefreshButton","UncontrolledDropdown","DropdownToggle","DropdownMenu","DropdownItem","Calendar","Loader","Request","Default","text","userAnalytics","activeTab","setActiveTab","userDetails","setUserDetails","appDownloads","setAppDownloads","chartsData","setChartsData","days","setDays","filterText","setFilterText","tabs","chartTitles","bar","pie","FetchData","response","console","log","code","data","consumers","agents","chartData","customer","refresh","updateDays","day","index","map","tab","i","marginTop","display","justifyContent","alignItems","marginBottom","color","fontSize","backgroundColor","top"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Row, Col } from \"reactstrap\";\r\nimport { TabContent, TabPane } from \"reactstrap\";\r\nimport BarChart from \"./BarChart\";\r\nimport Header from \"./Header\";\r\nimport AppDownloads from \"./AppDownloads\";\r\nimport Statistics from \"./Statistics\";\r\nimport { RefreshButton } from \"../../../components/RefreshButton\";\r\nimport {\r\n  UncontrolledDropdown,\r\n  DropdownToggle,\r\n  DropdownMenu,\r\n  DropdownItem,\r\n} from \"reactstrap\";\r\nimport { Calendar } from \"react-feather\";\r\nimport Loader from \"../../../components/Loader\";\r\nimport Request from \"../../../requests/analytics\";\r\n\r\nconst Default = () => {\r\n  const text = [\"Today   \", \"Last 7 Days\", \"Last 30 days\", \"Last 90 Days\"];\r\n  const { userAnalytics } = Request();\r\n  const [activeTab, setActiveTab] = useState(0);\r\n  const [userDetails, setUserDetails] = useState(null);\r\n  const [appDownloads, setAppDownloads] = useState(null);\r\n  const [chartsData, setChartsData] = useState(null);\r\n  const [days, setDays] = useState(30);\r\n  const [filterText, setFilterText] = useState(text[2]);\r\n  const tabs = [\"Settl  Customers\", \"Settl Agents\"];\r\n  const chartTitles = [\r\n    { bar: \"Customer Transactions\", pie: \"App Downloads\" },\r\n    { bar: \"Agent & Super Agent Transactions\", pie: \"Agent App Downloads\" },\r\n  ];\r\n\r\n  const FetchData = async () => {\r\n    const response = await userAnalytics(days);\r\n    console.log(response);\r\n    if (response.code === \"00\") {\r\n      await setUserDetails([response.data.consumers, response.data.agents]);\r\n      await setAppDownloads([\r\n        response.data.appDownloads.consumers,\r\n        response.data.appDownloads.agents,\r\n      ]);\r\n      await setChartsData([\r\n        response.data.chartData.customer,\r\n        response.data.chartData.agents,\r\n      ]);\r\n    }\r\n  };\r\n\r\n  const refresh = () => {\r\n    setUserDetails(null);\r\n    setAppDownloads(null);\r\n    setChartsData(null);\r\n    FetchData();\r\n  };\r\n\r\n  const updateDays = (day, index) => {\r\n    if (filterText !== text[index]) {\r\n      setChartsData(null);\r\n      setAppDownloads(null);\r\n      setDays(day);\r\n      setFilterText(text[index]);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    FetchData();\r\n  }, [days]);\r\n  return (\r\n    <>\r\n      <div className=\"bg_absolute\">\r\n        <Header />\r\n        <div className=\"nav\">\r\n          {tabs.map((tab, i) => (\r\n            <div\r\n              onClick={() => setActiveTab(i)}\r\n              className={`${activeTab === i ? \"active_nav\" : \"\"}`}\r\n            >\r\n              <p>{tab}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <div\r\n        style={{\r\n          marginTop: \"8rem \",\r\n        }}\r\n      >\r\n        {userDetails && appDownloads && chartsData ? (\r\n          <TabContent activeTab={activeTab}>\r\n            {tabs.map((tab, i) => (\r\n              <TabPane tabId={i} key={i}>\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"space-between\",\r\n                    alignItems: \"center\",\r\n                    marginBottom: \"10px\",\r\n                  }}\r\n                >\r\n                  <p\r\n                    style={{\r\n                      color: \"#304762\",\r\n                      fontSize: \"20px\",\r\n                    }}\r\n                  >\r\n                    {tab} Analytics\r\n                  </p>\r\n                  <div>\r\n                    <RefreshButton next={refresh} />\r\n                    <UncontrolledDropdown className=\"d-inline filter-dropdown\">\r\n                      <DropdownToggle\r\n                        caret\r\n                        color=\"light\"\r\n                        className=\"shadow-sm\"\r\n                        style={{\r\n                          backgroundColor: \"white\",\r\n                        }}\r\n                      >\r\n                        <Calendar className=\"feather align-middle mt-n1\" />{\" \"}\r\n                        {filterText}\r\n                      </DropdownToggle>\r\n                      <DropdownMenu\r\n                        right\r\n                        style={{\r\n                          top: \"25px\",\r\n                        }}\r\n                      >\r\n                        <DropdownItem onClick={() => updateDays(1, 0)}>\r\n                          Today\r\n                        </DropdownItem>\r\n                        <DropdownItem onClick={() => updateDays(7, 1)}>\r\n                          Last 7 Days\r\n                        </DropdownItem>\r\n                        <DropdownItem onClick={() => updateDays(30, 2)}>\r\n                          Last 30 Days\r\n                        </DropdownItem>\r\n                        <DropdownItem onClick={() => updateDays(90, 3)}>\r\n                          Last 90 Days\r\n                        </DropdownItem>\r\n                        <DropdownItem divider />\r\n                        <DropdownItem>Customize</DropdownItem>\r\n                      </DropdownMenu>\r\n                    </UncontrolledDropdown>\r\n                  </div>\r\n                </div>\r\n\r\n                <Statistics index={i} data={userDetails[i]} />\r\n                <Row\r\n                  style={{\r\n                    marginTop: \"2rem\",\r\n                  }}\r\n                >\r\n                  <Col lg=\"7\" className=\"d-flex\">\r\n                    <BarChart\r\n                      title={chartTitles[i].bar}\r\n                      chartData={chartsData[i]}\r\n                    />\r\n                  </Col>\r\n                  <Col lg=\"5\" className=\"d-flex\">\r\n                    <AppDownloads\r\n                      title={chartTitles[i].pie}\r\n                      downloads={appDownloads[i]}\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              </TabPane>\r\n            ))}\r\n          </TabContent>\r\n        ) : (\r\n          <Loader />\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\nexport default Default;\r\n"]},"metadata":{},"sourceType":"module"}