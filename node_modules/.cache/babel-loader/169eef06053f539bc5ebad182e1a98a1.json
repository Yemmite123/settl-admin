{"ast":null,"code":"import _slicedToArray from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Badge}from\"reactstrap\";import BootstrapTable from\"react-bootstrap-table-next\";import paginationFactory from\"react-bootstrap-table2-paginator\";import ToolkitProvider from\"react-bootstrap-table2-toolkit\";import Loader from\"../../../components/Loader\";import TransactionHistoryTableHeader from\"./TransactionHistoryTableHeader\";export default function TransactionHistoryTable(_ref){var setShowTransactionDetails=_ref.setShowTransactionDetails,tableData=_ref.tableData,setTransRef=_ref.setTransRef;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isfiltered=_useState2[0],setIsFiltered=_useState2[1];var _useState3=useState(tableData),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var Filter=function Filter(data){setData(\"\");var currentDate=new Date();var currentDateFormat=currentDate.setHours(0,0,0,0);var check=data.type.length>0||data.status.length>0||data.startDate!==currentDateFormat||data.endDate!==currentDateFormat;setTimeout(function(){var filtered=tableData.filter(function(product){if(check){setIsFiltered(true);var splitDate=product.date.slice(0,-6).split(\"/\");var productDate=new Date(+splitDate[2],splitDate[1]-1,+splitDate[0]).setHours(0,0,0,0);return data.status.includes(product.transStatus.toLowerCase())||data.type.includes(product.tranxType.toLowerCase())||productDate>=data.startDate&&productDate<=data.endDate;}else{setIsFiltered(false);return product;}});setData(filtered);},500);};var tableColumns=[{dataField:\"date\",text:\"Date\",formatter:function formatter(cell,row,rowIndex){return cell.slice(0,-8);}},{dataField:\"walletType\",text:\"Wallet Type\"},{dataField:\"tranxRef\",text:\"Tranx Ref.\"},{dataField:\"tranxType\",text:\"Tranx Type\"},{dataField:\"transAmount\",text:\"Amount\",classes:\"text-right\",headerClasses:\"text-right\",formatter:function formatter(cell,row,rowIndex){return/*#__PURE__*/React.createElement(\"span\",null,\"\\u20A6\",cell);}},{dataField:\"transStatus\",text:\"Status\",headerClasses:\"text-center\",formatter:function formatter(cell,row,rowIndex){if((cell===null||cell===void 0?void 0:cell.toLowerCase())===\"success\"){return/*#__PURE__*/React.createElement(Badge,{color:\"secondary\",className:\"badge-active\"},cell);}if((cell===null||cell===void 0?void 0:cell.toLowerCase())===\"pending\"){return/*#__PURE__*/React.createElement(Badge,{color:\"secondary\",className:\"badge-pending\"},cell);}if((cell===null||cell===void 0?void 0:cell.toLowerCase())===\"failed\"){return/*#__PURE__*/React.createElement(Badge,{color:\"secondary\",className:\"badge-failed\"},cell);}}}];var customTotal=function customTotal(from,to,size){return/*#__PURE__*/React.createElement(\"span\",{className:\"react-bootstrap-table-pagination-total\"},\"Showing \",from,\" to \",to,\" of \",size,\" Results\");};var rowEvents={onClick:function onClick(e,row,rowIndex){setShowTransactionDetails(function(prev){return!prev;});setTransRef(row.tranxRef);}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"admin-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"all-admins\"},/*#__PURE__*/React.createElement(\"h6\",null,\"Transaction History\"),/*#__PURE__*/React.createElement(\"div\",{className:\"admin-table transaction-table\"},/*#__PURE__*/React.createElement(ToolkitProvider,{responsive:true,keyField:\"id\",data:data?data:[],columns:tableColumns,exportCSV:{fileName:\"transaction history data.csv\"},search:true},function(props){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(TransactionHistoryTableHeader,{csvData:props.csvProps,filter:Filter,filtered:isfiltered,dataLength:data===null||data===void 0?void 0:data.length,search:props.searchProps}),!data?/*#__PURE__*/React.createElement(Loader,null):/*#__PURE__*/React.createElement(BootstrapTable,Object.assign({bootstrap4:true,bordered:false,wrapperClasses:\"table-responsive\",rowEvents:rowEvents,pagination:paginationFactory({sizePerPage:9,hideSizePerPage:true,showTotal:true,paginationTotalRenderer:customTotal})},props.baseProps)));})))));}","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/src/pages/customers/settl-customers/TransactionHistoryTable.js"],"names":["React","useState","Badge","BootstrapTable","paginationFactory","ToolkitProvider","Loader","TransactionHistoryTableHeader","TransactionHistoryTable","setShowTransactionDetails","tableData","setTransRef","isfiltered","setIsFiltered","data","setData","Filter","currentDate","Date","currentDateFormat","setHours","check","type","length","status","startDate","endDate","setTimeout","filtered","filter","product","splitDate","date","slice","split","productDate","includes","transStatus","toLowerCase","tranxType","tableColumns","dataField","text","formatter","cell","row","rowIndex","classes","headerClasses","customTotal","from","to","size","rowEvents","onClick","e","prev","tranxRef","fileName","props","csvProps","searchProps","sizePerPage","hideSizePerPage","showTotal","paginationTotalRenderer","baseProps"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Badge } from \"reactstrap\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport ToolkitProvider from \"react-bootstrap-table2-toolkit\";\nimport Loader from \"../../../components/Loader\";\nimport TransactionHistoryTableHeader from \"./TransactionHistoryTableHeader\";\n\nexport default function TransactionHistoryTable({\n  setShowTransactionDetails,\n  tableData,\n  setTransRef,\n}) {\n  const [isfiltered, setIsFiltered] = useState(false);\n  const [data, setData] = useState(tableData);\n\n  const Filter = (data) => {\n    setData(\"\");\n    const currentDate = new Date();\n    const currentDateFormat = currentDate.setHours(0, 0, 0, 0);\n    const check =\n      data.type.length > 0 ||\n      data.status.length > 0 ||\n      data.startDate !== currentDateFormat ||\n      data.endDate !== currentDateFormat;\n\n    setTimeout(() => {\n      const filtered = tableData.filter((product) => {\n        if (check) {\n          setIsFiltered(true);\n          const splitDate = product.date.slice(0, -6).split(\"/\");\n          const productDate = new Date(\n            +splitDate[2],\n            splitDate[1] - 1,\n            +splitDate[0]\n          ).setHours(0, 0, 0, 0);\n          return (\n            data.status.includes(product.transStatus.toLowerCase()) ||\n            data.type.includes(product.tranxType.toLowerCase()) ||\n            (productDate >= data.startDate && productDate <= data.endDate)\n          );\n        } else {\n          setIsFiltered(false);\n          return product;\n        }\n      });\n      setData(filtered);\n    }, 500);\n  };\n\n  const tableColumns = [\n    {\n      dataField: \"date\",\n      text: \"Date\",\n      formatter: (cell, row, rowIndex) => {\n        return cell.slice(0, -8);\n      },\n    },\n    {\n      dataField: \"walletType\",\n      text: \"Wallet Type\",\n    },\n    {\n      dataField: \"tranxRef\",\n      text: \"Tranx Ref.\",\n    },\n    {\n      dataField: \"tranxType\",\n      text: \"Tranx Type\",\n    },\n    {\n      dataField: \"transAmount\",\n      text: \"Amount\",\n      classes: \"text-right\",\n      headerClasses: \"text-right\",\n      formatter: (cell, row, rowIndex) => <span>₦{cell}</span>,\n    },\n    {\n      dataField: \"transStatus\",\n      text: \"Status\",\n      headerClasses: \"text-center\",\n      formatter: (cell, row, rowIndex) => {\n        if (cell?.toLowerCase() === \"success\") {\n          return (\n            <Badge color=\"secondary\" className=\"badge-active\">\n              {cell}\n            </Badge>\n          );\n        }\n        if (cell?.toLowerCase() === \"pending\") {\n          return (\n            <Badge color=\"secondary\" className=\"badge-pending\">\n              {cell}\n            </Badge>\n          );\n        }\n        if (cell?.toLowerCase() === \"failed\") {\n          return (\n            <Badge color=\"secondary\" className=\"badge-failed\">\n              {cell}\n            </Badge>\n          );\n        }\n      },\n    },\n  ];\n  const customTotal = (from, to, size) => (\n    <span className=\"react-bootstrap-table-pagination-total\">\n      Showing {from} to {to} of {size} Results\n    </span>\n  );\n\n  const rowEvents = {\n    onClick: (e, row, rowIndex) => {\n      setShowTransactionDetails((prev) => !prev);\n      setTransRef(row.tranxRef);\n    },\n  };\n\n  return (\n    <>\n      <div className=\"admin-body\">\n        <div className=\"all-admins\">\n          <h6>Transaction History</h6>\n          <div className=\"admin-table transaction-table\">\n            <ToolkitProvider\n              responsive\n              keyField=\"id\"\n              data={data ? data : []}\n              columns={tableColumns}\n              exportCSV={{\n                fileName: \"transaction history data.csv\",\n              }}\n              search\n            >\n              {(props) => (\n                <div>\n                  <TransactionHistoryTableHeader\n                    csvData={props.csvProps}\n                    filter={Filter}\n                    filtered={isfiltered}\n                    dataLength={data?.length}\n                    search={props.searchProps}\n                  />\n                  {!data ? (\n                    <Loader />\n                  ) : (\n                    <BootstrapTable\n                      bootstrap4\n                      bordered={false}\n                      wrapperClasses=\"table-responsive\"\n                      rowEvents={rowEvents}\n                      pagination={paginationFactory({\n                        sizePerPage: 9,\n                        hideSizePerPage: true,\n                        showTotal: true,\n                        paginationTotalRenderer: customTotal,\n                      })}\n                      {...props.baseProps}\n                    />\n                  )}\n                </div>\n              )}\n            </ToolkitProvider>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}