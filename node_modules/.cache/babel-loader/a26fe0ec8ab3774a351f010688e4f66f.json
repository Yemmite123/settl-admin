{"ast":null,"code":"import _regeneratorRuntime from \"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/src/pages/messaging/MessageTable.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { Badge } from \"reactstrap\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport ToolkitProvider from 'react-bootstrap-table2-toolkit';\nimport Loader from \"./../../components/Loader\";\nimport MessageTableHeader from \"./MessageTableHeader\";\nimport messageRequest from \"../../requests/message\";\nvar tableColumns = [{\n  dataField: \"date\",\n  text: \"Date\",\n  formatter: function formatter(cell, row, rowIndex) {\n    return cell.slice(0, -5);\n  }\n}, {\n  dataField: \"messageTypes\",\n  text: \"Type\"\n}, {\n  dataField: \"sender\",\n  text: \"Sender\"\n}, {\n  dataField: \"messageTitle\",\n  text: \"Title\"\n}, {\n  dataField: \"messageDescription\",\n  text: \"Message\"\n}, {\n  dataField: \"status\",\n  text: \"Status\",\n  headerClasses: \"text-center\",\n  formatter: function formatter(cell, row, rowIndex) {\n    if (cell.toLowerCase() === \"sent\") {\n      return /*#__PURE__*/React.createElement(Badge, {\n        color: \"secondary\",\n        className: \"badge-active\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 20\n        }\n      }, cell);\n    }\n\n    if (cell.toLowerCase() === \"draft\") {\n      return /*#__PURE__*/React.createElement(Badge, {\n        color: \"secondary\",\n        className: \"badge-pending\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 20\n        }\n      }, cell);\n    }\n\n    if (cell.toLowerCase() === \"failed\") {\n      return /*#__PURE__*/React.createElement(Badge, {\n        color: \"secondary\",\n        className: \"badge-unresolved\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 20\n        }\n      }, cell);\n    }\n  }\n}];\nexport default function MessageTable(_ref) {\n  var _this2 = this;\n\n  var setShowMessageDetails = _ref.setShowMessageDetails,\n      setDetails = _ref.setDetails;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isfiltered = _useState2[0],\n      setIsFiltered = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      data = _useState4[0],\n      setData = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      tableData = _useState6[0],\n      setTableData = _useState6[1];\n\n  var _messageRequest = messageRequest(),\n      getAllMessages = _messageRequest.getAllMessages;\n\n  var getRecentMessagesList = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return getAllMessages();\n\n            case 2:\n              response = _context.sent;\n\n              if (response.code === \"00\") {\n                console.log(response.data);\n                setData(response.data);\n                setTableData(response.data);\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getRecentMessagesList() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getRecentMessagesList();\n  }, []);\n\n  var Filter = function Filter(data) {\n    setData(\"\");\n    var check = data.status.length > 0;\n    setTimeout(function () {\n      var filtered = tableData.filter(function (product) {\n        if (check) {\n          setIsFiltered(true);\n          return data.status.includes(product.status.toLowerCase());\n        } else {\n          setIsFiltered(false);\n          return product;\n        }\n      });\n      setData(filtered);\n    }, 500);\n  };\n\n  var customTotal = function customTotal(from, to, size) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"react-bootstrap-table-pagination-total\",\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }\n    }, \"Showing \", from, \" to \", to, \" of \", size, \" Results\");\n  };\n\n  var rowEvents = {\n    onClick: function onClick(e, row, rowIndex) {\n      setDetails(row);\n      setShowMessageDetails(function (prev) {\n        return !prev;\n      });\n    }\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"admin-table message-table mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ToolkitProvider, {\n    keyField: \"id\",\n    data: data,\n    columns: tableColumns,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, function (props) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(MessageTableHeader, {\n      filter: Filter,\n      filtered: isfiltered,\n      dataLength: data.length,\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 29\n      }\n    }), !data ? /*#__PURE__*/React.createElement(Loader, {\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 33\n      }\n    }) : /*#__PURE__*/React.createElement(BootstrapTable, Object.assign({\n      bootstrap4: true,\n      bordered: false,\n      rowEvents: rowEvents,\n      wrapperClasses: \"table-responsive\",\n      pagination: paginationFactory({\n        sizePerPage: 9,\n        hideSizePerPage: true,\n        showTotal: true,\n        paginationTotalRenderer: customTotal\n      })\n    }, props.baseProps, {\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 33\n      }\n    })));\n  })));\n}","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/src/pages/messaging/MessageTable.js"],"names":["React","useState","useEffect","Badge","BootstrapTable","paginationFactory","ToolkitProvider","Loader","MessageTableHeader","messageRequest","tableColumns","dataField","text","formatter","cell","row","rowIndex","slice","headerClasses","toLowerCase","MessageTable","setShowMessageDetails","setDetails","isfiltered","setIsFiltered","data","setData","tableData","setTableData","getAllMessages","getRecentMessagesList","response","code","console","log","Filter","check","status","length","setTimeout","filtered","filter","product","includes","customTotal","from","to","size","rowEvents","onClick","e","prev","props","sizePerPage","hideSizePerPage","showTotal","paginationTotalRenderer","baseProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Badge  } from \"reactstrap\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport ToolkitProvider from 'react-bootstrap-table2-toolkit';\nimport Loader from \"./../../components/Loader\";\nimport MessageTableHeader from \"./MessageTableHeader\";\nimport messageRequest from \"../../requests/message\";\n\n\nconst tableColumns = [\n    {\n      dataField: \"date\",\n      text: \"Date\",\n      formatter: (cell, row, rowIndex) => {\n        return cell.slice(0, -5);\n      }\n    },\n    {\n        dataField: \"messageTypes\",\n        text: \"Type\"\n    },\n    {\n        dataField: \"sender\",\n        text: \"Sender\"\n    },\n    {\n        dataField: \"messageTitle\",\n        text: \"Title\"\n    },\n    {\n        dataField: \"messageDescription\",\n        text: \"Message\",\n    },\n    {\n      dataField: \"status\",\n      text: \"Status\",\n      headerClasses: \"text-center\",\n      formatter: (cell, row, rowIndex) => {\n        if (cell.toLowerCase() === \"sent\") {\n            return <Badge color=\"secondary\" className=\"badge-active\">{cell}</Badge>\n        }\n        if (cell.toLowerCase() === \"draft\") {\n            return <Badge color=\"secondary\" className=\"badge-pending\">{cell}</Badge>\n        }\n        if (cell.toLowerCase() === \"failed\") {\n            return <Badge color=\"secondary\" className=\"badge-unresolved\">{cell}</Badge>\n        }\n      }\n    }\n];\n\nexport default function MessageTable({setShowMessageDetails, setDetails}) {\n    const [isfiltered, setIsFiltered] = useState(false);\n    const [data, setData] = useState(\"\");\n    const [tableData, setTableData] = useState(\"\");\n\n    const { getAllMessages } = messageRequest();\n\n    const getRecentMessagesList = async() => {\n        const response = await getAllMessages();\n        if(response.code === \"00\") {\n          console.log(response.data);\n          setData(response.data);\n          setTableData(response.data);\n        }\n    }\n\n    useEffect(() => {\n        getRecentMessagesList();\n    }, []);\n\n    const Filter = (data) => {\n        setData(\"\");\n        const check = data.status.length > 0\n    \n        setTimeout(() => {\n          const filtered = tableData.filter((product) => {\n            if (check) {\n              setIsFiltered(true);\n              return (\n                data.status.includes(product.status.toLowerCase())\n              );\n            } else {\n              setIsFiltered(false);\n              return product;\n            }\n          });\n          setData(filtered);\n        }, 500);\n    };\n\n    const customTotal = (from, to, size) => (\n        <span className=\"react-bootstrap-table-pagination-total\">\n            Showing { from } to { to } of { size } Results\n        </span>\n    );\n\n    const rowEvents = {\n        onClick:  (e, row, rowIndex) => {\n            setDetails(row);\n            setShowMessageDetails((prev) => !prev);\n        }\n    }\n\n    return(\n        <>\n            <div className=\"admin-table message-table mt-4\">\n                <ToolkitProvider\n                    keyField=\"id\"\n                    data={data}\n                    columns={tableColumns}\n                >\n                    {\n                        props => (\n                        <div>\n                            <MessageTableHeader\n                                filter={Filter}\n                                filtered={isfiltered}\n                                dataLength={data.length}\n                            />\n                            {!data ? (\n                                <Loader />\n                            ) :(\n                                <BootstrapTable\n                                    bootstrap4\n                                    bordered={false}\n                                    rowEvents={rowEvents}\n                                    wrapperClasses=\"table-responsive\"\n                                    pagination={paginationFactory({\n                                        sizePerPage: 9,\n                                        hideSizePerPage: true,\n                                        showTotal: true,\n                                        paginationTotalRenderer: customTotal,\n                                    })}\n                                    { ...props.baseProps }\n                                />\n                            )}\n                        </div>)\n                    }\n                </ToolkitProvider>\n            </div>\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}