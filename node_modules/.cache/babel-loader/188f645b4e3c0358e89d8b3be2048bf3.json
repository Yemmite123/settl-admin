{"ast":null,"code":"import _regeneratorRuntime from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{connect}from\"react-redux\";import{Badge,Button,Col,Form,FormGroup,Label,Modal,ModalBody,ModalHeader,ModalFooter,Row}from\"reactstrap\";import BootstrapTable from\"react-bootstrap-table-next\";import paginationFactory from\"react-bootstrap-table2-paginator\";import InputBox from\"../../components/InputBox\";import{Multiselect}from\"multiselect-react-dropdown\";import{Edit2,Trash}from\"react-feather\";import securityIcon from\"./../../assets/img/icons/security.svg\";import online from\"./../../assets/img/icons/online.svg\";import Loader from\"../../components/Loader\";import{useAPI}from\"../../contexts/AdminContext\";import adminRequest from\"../../requests/admin\";import SuccessDialog from\"../SuccessDialog\";import FailureDialog from\"../FailureDialog\";import AdminFilter from\"./AdminFilter\";var tableColumns=[{dataField:\"employeeName\",text:\"Name\"},{dataField:\"position\",text:\"Department\"},{dataField:\"adminRole\",text:\"Type\",formatter:function formatter(cell,row,rowIndex){return cell.charAt(0).toUpperCase()+cell.substr(1).toLowerCase();}},{dataField:\"isActive\",text:\"Status\",headerClasses:\"text-center\",formatter:function formatter(cell,row,rowIndex){return cell?/*#__PURE__*/React.createElement(Badge,{color:\"secondary\",className:\"badge-active\"},\"Active\"):/*#__PURE__*/React.createElement(Badge,{color:\"secondary\",className:\"badge-pending\"},\"Deactivated\");},classes:function classes(cell,row,rowIndex,colIndex){return cell?\"opacity\":\"\";}},{dataField:\"actions\",text:\"Action\",formatter:function formatter(cell,row,rowIndex){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Edit2,{className:\"align-middle edit mr-3\",size:18}),/*#__PURE__*/React.createElement(Trash,{className:\"align-middle delete\",size:18}));}}];var style={border:\"1px solid #4F1699\",background:\"#4F1699\",fontSize:\"15px\",lineHeight:\"18px\",letterSpacing:\"0.3px\",width:\"100%\",padding:\"15px\"};function AdminTable(_ref){var userName=_ref.userName,email=_ref.email,filterText=_ref.filterText;var _useAPI=useAPI(),adminData=_useAPI.adminData;var _adminRequest=adminRequest(),getAdminById=_adminRequest.getAdminById,updateAdmin=_adminRequest.updateAdmin,deactivateAdmin=_adminRequest.deactivateAdmin;var _useState=useState(adminData),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),singleAdminData=_useState4[0],setSingleAdminData=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),adminDetailsModal=_useState6[0],setAdminDetailsModal=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),deactivateModal=_useState8[0],setDeactivateModal=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),updateModal=_useState10[0],setUpdateModal=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),adminId=_useState12[0],setAdminId=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),adminFullName=_useState14[0],setAdminFullName=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),adminEmailAddress=_useState16[0],setAdminEmailAddress=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),adminPhoneNumber=_useState18[0],setAdminPhoneNumber=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),adminDepartment=_useState20[0],setAdminDepartment=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),adminRole=_useState22[0],setAdminRole=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),showSuccess=_useState24[0],setShowSuccess=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),showFailure=_useState26[0],setShowFailure=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),loading=_useState28[0],setLoading=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),isfiltered=_useState30[0],setIsFiltered=_useState30[1];var getSingleAdminData=function getSingleAdminData(){setAdminId(singleAdminData.id);setAdminFullName(singleAdminData.employeeName);setAdminEmailAddress(singleAdminData.emailAddress);setAdminPhoneNumber(singleAdminData.phoneNumber);setAdminDepartment(singleAdminData.position);setAdminRole(singleAdminData.adminRole);};console.log(\"admin\",adminRole);var _useState31=useState([{name:\"Admin\",id:1},{name:\"Super Admin\",id:2},{name:\"Support\",id:3}]),_useState32=_slicedToArray(_useState31,1),options=_useState32[0];var toggleDeactivateModal=function toggleDeactivateModal(){return setDeactivateModal(!deactivateModal);};var toggleUpdateModal=function toggleUpdateModal(){return setUpdateModal(!updateModal);};var toggleDetailsModal=function toggleDetailsModal(){return setAdminDetailsModal(!adminDetailsModal);};useEffect(function(){setData(adminData);getSingleAdminData();},[adminData,singleAdminData]);var customTotal=function customTotal(from,to,size){return/*#__PURE__*/React.createElement(\"span\",{className:\"react-bootstrap-table-pagination-total\"},\"Showing \",from,\" to \",to,\" of \",size,\" Results\");};var rowEvents={onClick:function(){var _onClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e,row,rowIndex){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getAdminById(row.id);case 2:response=_context.sent;if(response.code===\"00\"){setSingleAdminData(response.data);}toggleDetailsModal();case 5:case\"end\":return _context.stop();}}},_callee);}));function onClick(_x,_x2,_x3){return _onClick.apply(this,arguments);}return onClick;}()};var detailsData=[{title:\"Name\",value:/*#__PURE__*/React.createElement(\"p\",{className:\"details-value\"},singleAdminData.employeeName)},{title:\"Email\",value:/*#__PURE__*/React.createElement(\"p\",{className:\"details-value\"},singleAdminData.emailAddress)},{title:\"Phone Number\",value:/*#__PURE__*/React.createElement(\"p\",{className:\"details-value\"},singleAdminData.phoneNumber)},{title:\"Department\",value:/*#__PURE__*/React.createElement(\"p\",{className:\"details-value\"},singleAdminData.position)},{title:\"Level\",value:/*#__PURE__*/React.createElement(\"p\",{className:\"details-value\"},\"Tier \".concat(singleAdminData.level))},{title:\"Status\",value:/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center\"},/*#__PURE__*/React.createElement(\"img\",{src:online,className:\"mr-2\",alt:\"\"}),\" Active\")}];var handleUpdateDetails=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var updatedAdminData,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();setLoading(true);updatedAdminData=new FormData();updatedAdminData.append(\"Id\",adminId);updatedAdminData.append(\"EmployeeName\",adminFullName);updatedAdminData.append(\"EmailAddress\",adminEmailAddress);updatedAdminData.append(\"PhoneNumber\",adminPhoneNumber);updatedAdminData.append(\"AdminRole\",adminRole);updatedAdminData.append(\"Position\",adminDepartment);updatedAdminData.append(\"CreatedBy\",userName);_context2.next=12;return updateAdmin(updatedAdminData);case 12:response=_context2.sent;if(response.code===\"00\"){setLoading(false);console.log(response.data);setAdminDetailsModal(false);setUpdateModal(false);setShowSuccess(true);}else{setLoading(false);setShowFailure(true);}case 14:case\"end\":return _context2.stop();}}},_callee2);}));return function handleUpdateDetails(_x4){return _ref2.apply(this,arguments);};}();var handleDeactivateAdmin=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setLoading(true);_context3.next=3;return deactivateAdmin(adminId,false,email);case 3:response=_context3.sent;if(!(response.code===\"00\")){_context3.next=11;break;}setLoading(false);console.log(response.data);setAdminDetailsModal(false);setDeactivateModal(false);setShowSuccess(true);return _context3.abrupt(\"return\",true);case 11:setLoading(false);setShowFailure(true);return _context3.abrupt(\"return\",false);case 14:case\"end\":return _context3.stop();}}},_callee3);}));return function handleDeactivateAdmin(){return _ref3.apply(this,arguments);};}();// to filter data on the table\nvar Filter=function Filter(data){setData(\"\");var check=data.status.length>0||data.type.length>0;setTimeout(function(){var filtered=adminData.filter(function(admin){if(check){setIsFiltered(true);return data.status.includes(admin.isActive.toString().toLowerCase())||data.type.includes(admin.adminRole.toLowerCase());}else{setIsFiltered(false);return admin;}});setData(filtered);},500);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(AdminFilter,{filter:Filter,filtered:isfiltered,dataLength:data.length}),/*#__PURE__*/React.createElement(\"div\",{className:\"admin-table mt-4\"},data.length===0?/*#__PURE__*/React.createElement(Loader,null):/*#__PURE__*/React.createElement(BootstrapTable,{keyField:\"id\",data:data.filter(function(d){return d.employeeName.toLowerCase().includes(filterText);}),columns:tableColumns,rowEvents:rowEvents,bootstrap4:true,bordered:false,pagination:paginationFactory({sizePerPage:9,hideSizePerPage:true,showTotal:true,paginationTotalRenderer:customTotal})})),/*#__PURE__*/React.createElement(Modal,{isOpen:adminDetailsModal,toggle:toggleDetailsModal,className:\"details-modal\"},/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h6\",{className:\"p-3 mb-3\"},\"Admin Details\"),detailsData.map(function(data,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"details-wrapper d-flex justify-content-between px-3 mb-3\",key:index},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"details-title\"},data.title)),/*#__PURE__*/React.createElement(\"div\",null,data.value));})),/*#__PURE__*/React.createElement(Row,{className:\"px-3\"},/*#__PURE__*/React.createElement(Col,{md:6},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{color:\"info\",className:\"btn-cancel\",onClick:toggleUpdateModal},\"Update Admin\"))),/*#__PURE__*/React.createElement(Col,{md:6},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{color:\"danger\",className:\"btn-delete w-100\",onClick:toggleDeactivateModal},\"Deactivate Admin\")))))),/*#__PURE__*/React.createElement(Modal,{isOpen:updateModal,toggle:toggleUpdateModal,className:\"admin-modal update-modal\"},/*#__PURE__*/React.createElement(ModalHeader,{toggle:toggleUpdateModal},\"Update Admin details\"),/*#__PURE__*/React.createElement(ModalBody,{className:\"pt-3\"},/*#__PURE__*/React.createElement(Form,{method:\"post\",onSubmit:handleUpdateDetails,className:\"mt-3 new-admin-form\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(InputBox,{type:\"text\",name:\"adminFullName\",id:\"adminFullName\",value:adminFullName,onChange:function onChange(e){return setAdminFullName(e.target.value);}}),/*#__PURE__*/React.createElement(Label,{for:\"adminFullName\"},\"Full Name\")),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(InputBox,{type:\"email\",name:\"adminEmailAddress\",id:\"adminEmailAddress\",value:adminEmailAddress,onChange:function onChange(e){return setAdminEmailAddress(e.target.value);}}),/*#__PURE__*/React.createElement(Label,{for:\"adminEmailAddress\"},\"Email Address\")),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(InputBox,{type:\"text\",name:\"adminPhoneNumber\",id:\"adminPhoneNumber\",value:adminPhoneNumber,onChange:function onChange(e){return setAdminPhoneNumber(e.target.value);}}),/*#__PURE__*/React.createElement(Label,{for:\"adminPhoneNumber\"},\"Phone number\")),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(InputBox,{type:\"text\",name:\"adminDepartment\",id:\"adminDepartment\",value:adminDepartment,onChange:function onChange(e){return setAdminDepartment(e.target.value);}}),/*#__PURE__*/React.createElement(Label,{for:\"adminDepartment\"},\"Department\")),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Multiselect,{className:\"forget_pass_select\",options:options,showCheckbox:true,showArrow:true// style={ { border: \"3px solid red\", \"border-bottom\": \"1px solid blue\", \"border-radius\": \"0px\" } }\n,placeholder:adminRole===\"\"?\"Choose Role\":adminRole,displayValue:\"name\",onSelect:function onSelect(e){return setAdminRole(e[0].id);},singleSelect:true})),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(Button,{color:\"info\",className:\"btn-cancel\",onClick:toggleUpdateModal},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{color:\"primary\",className:\"btn-add\",type:\"submit\",style:style},\"Update Details\",loading?/*#__PURE__*/React.createElement(\"div\",{className:\"spinner-border spinner-border-sm spinner text-white ml-2\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{className:\"sr-only\"},\"Loading...\")):\"\"))))),/*#__PURE__*/React.createElement(Modal,{isOpen:deactivateModal,toggle:toggleDeactivateModal,className:\"admin-modal deactivate-modal\"},/*#__PURE__*/React.createElement(ModalHeader,{toggle:toggleDeactivateModal},\"Deactivation Confirmation\"),/*#__PURE__*/React.createElement(ModalBody,{className:\"text-center pt-4 px-5 mx-2\"},/*#__PURE__*/React.createElement(\"img\",{src:securityIcon,alt:\"an icon\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"pt-3\"},\"Deactivating this admin user means they willl no longer be able to view their Dashboard. Are you sure you want to continue?\")),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{color:\"info\",className:\"btn-cancel\",onClick:toggleDeactivateModal},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{color:\"danger\",className:\"btn-delete\",onClick:handleDeactivateAdmin},\"Yes, Delete\",loading?/*#__PURE__*/React.createElement(\"div\",{className:\"spinner-border spinner-border-sm spinner text-white ml-2\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{className:\"sr-only\"},\"Loading...\")):\"\"))),/*#__PURE__*/React.createElement(SuccessDialog,{isOpen:showSuccess,toggle:function toggle(){return setShowSuccess(!showSuccess);},title:\"Success Message\",details:\"Your data has been successfully updated\"}),/*#__PURE__*/React.createElement(FailureDialog,{isOpen:showFailure,toggle:function toggle(){return setShowFailure(!showFailure);},title:\"Failure Message\",details:\"Oops! An error occured\"}));}var mapStateToProps=function mapStateToProps(state){var _state$user,_state$user$details,_state$user$details$a,_state$user2,_state$user2$details,_state$user2$details$;return{userName:state===null||state===void 0?void 0:(_state$user=state.user)===null||_state$user===void 0?void 0:(_state$user$details=_state$user.details)===null||_state$user$details===void 0?void 0:(_state$user$details$a=_state$user$details.admin)===null||_state$user$details$a===void 0?void 0:_state$user$details$a.fullname,email:state===null||state===void 0?void 0:(_state$user2=state.user)===null||_state$user2===void 0?void 0:(_state$user2$details=_state$user2.details)===null||_state$user2$details===void 0?void 0:(_state$user2$details$=_state$user2$details.admin)===null||_state$user2$details$===void 0?void 0:_state$user2$details$.email};};export default connect(mapStateToProps)(AdminTable);","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/src/pages/admin-management/AdminTable.js"],"names":["React","useState","useEffect","connect","Badge","Button","Col","Form","FormGroup","Label","Modal","ModalBody","ModalHeader","ModalFooter","Row","BootstrapTable","paginationFactory","InputBox","Multiselect","Edit2","Trash","Loader","useAPI","adminRequest","SuccessDialog","FailureDialog","AdminFilter","tableColumns","dataField","text","formatter","cell","row","rowIndex","charAt","toUpperCase","substr","toLowerCase","headerClasses","classes","colIndex","style","border","background","fontSize","lineHeight","letterSpacing","width","padding","AdminTable","userName","email","filterText","adminData","getAdminById","updateAdmin","deactivateAdmin","data","setData","singleAdminData","setSingleAdminData","adminDetailsModal","setAdminDetailsModal","deactivateModal","setDeactivateModal","updateModal","setUpdateModal","adminId","setAdminId","adminFullName","setAdminFullName","adminEmailAddress","setAdminEmailAddress","adminPhoneNumber","setAdminPhoneNumber","adminDepartment","setAdminDepartment","adminRole","setAdminRole","showSuccess","setShowSuccess","showFailure","setShowFailure","loading","setLoading","isfiltered","setIsFiltered","getSingleAdminData","id","employeeName","emailAddress","phoneNumber","position","console","log","name","options","toggleDeactivateModal","toggleUpdateModal","toggleDetailsModal","customTotal","from","to","size","rowEvents","onClick","e","response","code","detailsData","title","value","level","online","handleUpdateDetails","preventDefault","updatedAdminData","FormData","append","handleDeactivateAdmin","Filter","check","status","length","type","setTimeout","filtered","filter","admin","includes","isActive","toString","d","sizePerPage","hideSizePerPage","showTotal","paginationTotalRenderer","map","index","target","securityIcon","mapStateToProps","state","user","details","fullname"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  Badge,\n  Button,\n  Col,\n  Form,\n  FormGroup,\n  Label,\n  Modal,\n  ModalBody,\n  ModalHeader,\n  ModalFooter,\n  Row,\n} from \"reactstrap\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport InputBox from \"../../components/InputBox\";\nimport { Multiselect } from \"multiselect-react-dropdown\";\nimport { Edit2, Trash } from \"react-feather\";\nimport securityIcon from \"./../../assets/img/icons/security.svg\";\nimport online from \"./../../assets/img/icons/online.svg\";\nimport Loader from \"../../components/Loader\";\nimport { useAPI } from \"../../contexts/AdminContext\";\nimport adminRequest from \"../../requests/admin\";\nimport SuccessDialog from \"../SuccessDialog\";\nimport FailureDialog from \"../FailureDialog\";\nimport AdminFilter from \"./AdminFilter\";\n\nconst tableColumns = [\n    {\n        dataField: \"employeeName\",\n        text: \"Name\"\n    },\n    {\n        dataField: \"position\",\n        text: \"Department\"\n    },\n    {\n        dataField: \"adminRole\",\n        text: \"Type\",\n        formatter: (cell, row, rowIndex) => {\n            return (\n                cell.charAt(0).toUpperCase() + cell.substr(1).toLowerCase()\n            );\n        },\n    },\n    {\n        dataField: \"isActive\",\n        text: \"Status\",\n        headerClasses: \"text-center\",\n        formatter: (cell, row, rowIndex) => {\n            return (\n                cell ? <Badge color=\"secondary\" className=\"badge-active\">Active</Badge> :\n                <Badge color=\"secondary\" className=\"badge-pending\">Deactivated</Badge>\n            );\n        },\n        classes: (cell, row, rowIndex, colIndex) => { \n            return cell ? \"opacity\" : \"\"\n        }\n    },\n    {\n        dataField: \"actions\",\n        text: \"Action\",\n        formatter: (cell, row, rowIndex) => {\n            return (\n                <div>\n                    <Edit2 className=\"align-middle edit mr-3\" size={18} />\n                    <Trash className=\"align-middle delete\" size={18} />\n                </div>\n            );\n        },\n    },\n];\n\nconst style = {\n  border: \"1px solid #4F1699\",\n  background: \"#4F1699\",\n  fontSize: \"15px\",\n  lineHeight: \"18px\",\n  letterSpacing: \"0.3px\",\n  width: \"100%\",\n  padding: \"15px\",\n};\n\nfunction AdminTable({ userName, email, filterText }) {\n  const { adminData } = useAPI();\n  const { getAdminById, updateAdmin, deactivateAdmin } = adminRequest();\n  const [data, setData] = useState(adminData);\n  const [singleAdminData, setSingleAdminData] = useState(\"\");\n  const [adminDetailsModal, setAdminDetailsModal] = useState(false);\n  const [deactivateModal, setDeactivateModal] = useState(false);\n  const [updateModal, setUpdateModal] = useState(false);\n\n  const [adminId, setAdminId] = useState(\"\");\n  const [adminFullName, setAdminFullName] = useState(\"\");\n  const [adminEmailAddress, setAdminEmailAddress] = useState(\"\");\n  const [adminPhoneNumber, setAdminPhoneNumber] = useState(\"\");\n  const [adminDepartment, setAdminDepartment] = useState(\"\");\n  const [adminRole, setAdminRole] = useState(\"\");\n\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [showFailure, setShowFailure] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n    const [isfiltered, setIsFiltered] = useState(false);\n\n    const getSingleAdminData = () => {\n        setAdminId(singleAdminData.id);\n        setAdminFullName(singleAdminData.employeeName);\n        setAdminEmailAddress(singleAdminData.emailAddress);\n        setAdminPhoneNumber(singleAdminData.phoneNumber);\n        setAdminDepartment(singleAdminData.position);\n        setAdminRole(singleAdminData.adminRole);\n    }\n\n  console.log(\"admin\", adminRole);\n  const [options] = useState([\n    { name: \"Admin\", id: 1 },\n    { name: \"Super Admin\", id: 2 },\n    { name: \"Support\", id: 3 },\n  ]);\n\n  const toggleDeactivateModal = () => setDeactivateModal(!deactivateModal);\n  const toggleUpdateModal = () => setUpdateModal(!updateModal);\n  const toggleDetailsModal = () => setAdminDetailsModal(!adminDetailsModal);\n\n  useEffect(() => {\n    setData(adminData);\n    getSingleAdminData();\n  }, [adminData, singleAdminData]);\n\n  const customTotal = (from, to, size) => (\n    <span className=\"react-bootstrap-table-pagination-total\">\n      Showing {from} to {to} of {size} Results\n    </span>\n  );\n\n  const rowEvents = {\n    onClick: async (e, row, rowIndex) => {\n      const response = await getAdminById(row.id);\n      if (response.code === \"00\") {\n        setSingleAdminData(response.data);\n      }\n      toggleDetailsModal();\n    },\n  };\n\n  const detailsData = [\n    {\n      title: \"Name\",\n      value: <p className=\"details-value\">{singleAdminData.employeeName}</p>,\n    },\n    {\n      title: \"Email\",\n      value: <p className=\"details-value\">{singleAdminData.emailAddress}</p>,\n    },\n    {\n      title: \"Phone Number\",\n      value: <p className=\"details-value\">{singleAdminData.phoneNumber}</p>,\n    },\n    {\n      title: \"Department\",\n      value: <p className=\"details-value\">{singleAdminData.position}</p>,\n    },\n    {\n      title: \"Level\",\n      value: <p className=\"details-value\">{`Tier ${singleAdminData.level}`}</p>,\n    },\n    {\n      title: \"Status\",\n      value: (\n        <div className=\"d-flex align-items-center\">\n          <img src={online} className=\"mr-2\" alt=\"\" /> Active\n        </div>\n      ),\n    },\n  ];\n\n  const handleUpdateDetails = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n\n    const updatedAdminData = new FormData();\n    updatedAdminData.append(\"Id\", adminId);\n    updatedAdminData.append(\"EmployeeName\", adminFullName);\n    updatedAdminData.append(\"EmailAddress\", adminEmailAddress);\n    updatedAdminData.append(\"PhoneNumber\", adminPhoneNumber);\n    updatedAdminData.append(\"AdminRole\", adminRole);\n    updatedAdminData.append(\"Position\", adminDepartment);\n    updatedAdminData.append(\"CreatedBy\", userName);\n\n    const response = await updateAdmin(updatedAdminData);\n\n    if (response.code === \"00\") {\n      setLoading(false);\n      console.log(response.data);\n      setAdminDetailsModal(false);\n      setUpdateModal(false);\n      setShowSuccess(true);\n    } else {\n      setLoading(false);\n      setShowFailure(true);\n    }\n  };\n\n    const handleDeactivateAdmin = async () => {\n        setLoading(true);\n\n        const response = await deactivateAdmin(adminId, false, email);\n\n        if (response.code === \"00\") {\n        setLoading(false);\n        console.log(response.data);\n        setAdminDetailsModal(false);\n        setDeactivateModal(false);\n        setShowSuccess(true);\n        return true;\n        }\n        setLoading(false);\n        setShowFailure(true);\n        return false;\n    };\n\n    // to filter data on the table\n    const Filter = (data) => {\n        setData(\"\");\n        const check =\n          data.status.length > 0 || data.type.length > 0;\n    \n        setTimeout(() => {\n          const filtered = adminData.filter((admin) => {\n            if (check) {\n              setIsFiltered(true);\n              return (\n                data.status.includes(admin.isActive.toString().toLowerCase()) ||\n                data.type.includes(admin.adminRole.toLowerCase())\n              );\n            } else {\n              setIsFiltered(false);\n              return admin;\n            }\n          });\n          setData(filtered);\n        }, 500);\n    };\n    \n    return (\n        <>\n            <AdminFilter\n                filter={Filter}\n                filtered={isfiltered}\n                dataLength={data.length}\n            />\n            <div className=\"admin-table mt-4\">\n                {\n                    data.length === 0 ? <Loader /> :\n                    <BootstrapTable\n                        keyField=\"id\"\n                        data={data.filter((d) =>\n                            d.employeeName.toLowerCase().includes(filterText)\n                        )}\n                        columns={tableColumns}\n                        rowEvents={rowEvents}\n                        bootstrap4\n                        bordered={false}\n                        pagination={paginationFactory({\n                        sizePerPage: 9,\n                        hideSizePerPage: true,\n                        showTotal: true,\n                            paginationTotalRenderer: customTotal,\n                        })}\n                    />\n                }\n            </div>\n\n            {/* Single Admin Details */}\n            <Modal\n                isOpen={adminDetailsModal}\n                toggle={toggleDetailsModal}\n                className=\"details-modal\"\n            >\n                <ModalBody>\n                    <div>\n                        <h6 className=\"p-3 mb-3\">Admin Details</h6>\n                        {detailsData.map((data, index) => {\n                            return (\n                                <div\n                                    className=\"details-wrapper d-flex justify-content-between px-3 mb-3\"\n                                    key={index}\n                                >\n                                    <div>\n                                        <p className=\"details-title\">{data.title}</p>\n                                    </div>\n                                    <div>{data.value}</div>\n                                </div>\n                            );\n                        })}\n                    </div>\n                    <Row className=\"px-3\">\n                        <Col md={6}>\n                            <div>\n                                <Button\n                                    color=\"info\"\n                                    className=\"btn-cancel\"\n                                    onClick={toggleUpdateModal}\n                                >\n                                    Update Admin\n                                </Button>\n                            </div>\n                        </Col>\n                        <Col md={6}>\n                            <div>\n                                <Button\n                                    color=\"danger\"\n                                    className=\"btn-delete w-100\"\n                                    onClick={toggleDeactivateModal}\n                                >\n                                    Deactivate Admin\n                                </Button>\n                            </div>\n                        </Col>\n                    </Row>\n                </ModalBody>\n            </Modal>\n\n            {/* Update modal  */}\n            <Modal\n                isOpen={updateModal}\n                toggle={toggleUpdateModal}\n                className=\"admin-modal update-modal\"\n            >\n                <ModalHeader toggle={toggleUpdateModal}>\n                Update Admin details\n                </ModalHeader>\n                <ModalBody className=\"pt-3\">\n                    <Form\n                        method=\"post\"\n                        onSubmit={handleUpdateDetails}\n                        className=\"mt-3 new-admin-form\"\n                    >\n                        <FormGroup>\n                            <InputBox\n                                type=\"text\"\n                                name=\"adminFullName\"\n                                id=\"adminFullName\"\n                                value={adminFullName}\n                                onChange={(e) => setAdminFullName(e.target.value)}\n                            />\n                            <Label for=\"adminFullName\">Full Name</Label>\n                        </FormGroup>\n                        <FormGroup>\n                            <InputBox\n                                type=\"email\"\n                                name=\"adminEmailAddress\"\n                                id=\"adminEmailAddress\"\n                                value={adminEmailAddress}\n                                onChange={(e) => setAdminEmailAddress(e.target.value)}\n                            />\n                            <Label for=\"adminEmailAddress\">Email Address</Label>\n                        </FormGroup>\n                        <FormGroup>\n                            <InputBox\n                                type=\"text\"\n                                name=\"adminPhoneNumber\"\n                                id=\"adminPhoneNumber\"\n                                value={adminPhoneNumber}\n                                onChange={(e) => setAdminPhoneNumber(e.target.value)}\n                            />\n                            <Label for=\"adminPhoneNumber\">Phone number</Label>\n                        </FormGroup>\n                        <FormGroup>\n                            <InputBox\n                                type=\"text\"\n                                name=\"adminDepartment\"\n                                id=\"adminDepartment\"\n                                value={adminDepartment}\n                                onChange={(e) => setAdminDepartment(e.target.value)}\n                            />\n                            <Label for=\"adminDepartment\">Department</Label>\n                        </FormGroup>\n                        <FormGroup>\n                            <Multiselect\n                                className=\"forget_pass_select\"\n                                options={options}\n                                showCheckbox={true}\n                                showArrow={true}\n                                // style={ { border: \"3px solid red\", \"border-bottom\": \"1px solid blue\", \"border-radius\": \"0px\" } }\n                                placeholder={adminRole === \"\" ? \"Choose Role\" : adminRole}\n                                displayValue=\"name\"\n                                onSelect={(e) => setAdminRole(e[0].id)}\n                                singleSelect={true}\n                            />\n                        </FormGroup>\n                        <hr />\n                        <div className=\"d-flex justify-content-between\">\n                            <Button\n                                color=\"info\"\n                                className=\"btn-cancel\"\n                                onClick={toggleUpdateModal}\n                            >\n                                Cancel\n                            </Button>\n                            <Button\n                                color=\"primary\"\n                                className=\"btn-add\"\n                                type=\"submit\"\n                                style={style}\n                            >\n                                Update Details\n                                {loading ? (\n                                <div\n                                    className=\"spinner-border spinner-border-sm spinner text-white ml-2\"\n                                    role=\"status\"\n                                >\n                                    <span className=\"sr-only\">Loading...</span>\n                                </div>\n                                ) : (\n                                \"\"\n                                )}\n                            </Button>\n                        </div>\n                    </Form>\n                </ModalBody>\n            </Modal>\n\n            {/* Deactivate Modal */}\n            <Modal\n                isOpen={deactivateModal}\n                toggle={toggleDeactivateModal}\n                className=\"admin-modal deactivate-modal\"\n            >\n                <ModalHeader toggle={toggleDeactivateModal}>\n                    Deactivation Confirmation\n                </ModalHeader>\n                <ModalBody className=\"text-center pt-4 px-5 mx-2\">\n                    <img src={securityIcon} alt=\"an icon\" />\n                    <p className=\"pt-3\">\n                        Deactivating this admin user means they willl no longer be able to\n                        view their Dashboard. Are you sure you want to continue?\n                    </p>\n                </ModalBody>\n                <ModalFooter>\n                    <Button\n                        color=\"info\"\n                        className=\"btn-cancel\"\n                        onClick={toggleDeactivateModal}\n                    >\n                        Cancel\n                    </Button>\n                    <Button\n                        color=\"danger\"\n                        className=\"btn-delete\"\n                        onClick={handleDeactivateAdmin}\n                    >\n                        Yes, Delete\n                        {loading ? (\n                        <div\n                            className=\"spinner-border spinner-border-sm spinner text-white ml-2\"\n                            role=\"status\"\n                        >\n                            <span className=\"sr-only\">Loading...</span>\n                        </div>\n                        ) : (\n                        \"\"\n                        )}\n                    </Button>\n                </ModalFooter>\n            </Modal>\n\n            <SuccessDialog\n                isOpen={showSuccess}\n                toggle={() => setShowSuccess(!showSuccess)}\n                title=\"Success Message\"\n                details=\"Your data has been successfully updated\"\n            />\n\n            <FailureDialog\n                isOpen={showFailure}\n                toggle={() => setShowFailure(!showFailure)}\n                title=\"Failure Message\"\n                details=\"Oops! An error occured\"\n            />\n        </>\n    );\n}\n\nconst mapStateToProps = (state) => ({\n  userName: state?.user?.details?.admin?.fullname,\n  email: state?.user?.details?.admin?.email,\n});\nexport default connect(mapStateToProps)(AdminTable);\n"]},"metadata":{},"sourceType":"module"}