{"ast":null,"code":"import _regeneratorRuntime from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Header from\"../../../components/Header\";import Statistics from\"./Statistics\";import Table from\"./Table\";import logo from\"../../../assets/img/icons/referralicon.svg\";import cardRequests from\"./../../../requests/card-management\";import Loader from\"../../../components/Loader\";import CustomerDetails from\"./CustomerDetails\";var CardManagement=function CardManagement(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),card=_useState2[0],setCard=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),cardData=_useState4[0],setCardData=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showCustomerDetails=_useState6[0],setShowCustomerDetails=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),details=_useState8[0],setDetails=_useState8[1];var _useState9=useState(30),_useState10=_slicedToArray(_useState9,2),days=_useState10[0],setDays=_useState10[1];var text=[\"Today   \",\"Last 7 Days\",\"Last 30 days\",\"Last 90 Days\"];var _useState11=useState(text[2]),_useState12=_slicedToArray(_useState11,2),filterText=_useState12[0],setFilterText=_useState12[1];var _cardRequests=cardRequests(),getAllCards=_cardRequests.getAllCards;var getRecentCardRequestsList=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getAllCards(days);case 2:response=_context.sent;if(response.code===\"00\"){console.log(response.data);console.log(response.data.allCardRequests);setCard(response.data);setCardData(response.data.allCardRequests);}case 4:case\"end\":return _context.stop();}}},_callee);}));return function getRecentCardRequestsList(){return _ref.apply(this,arguments);};}();var refresh=function refresh(){setCard(\"\");setCardData(\"\");getRecentCardRequestsList();};var transactions=[{name:\"Total Virtual Card Request\",total_amount:card.volOfVirtualCardRequest,percentage:card.percentVirtualCardRequest},{name:\"Total Physical Card Request\",total_amount:\"0\",percentage:\"0\"},{name:\"Total Virtual Card Disbursed\",total_amount:card.virtualCardDisbursed,percentage:card.percentageVirtualCard},{name:\"Total Physical Card Disbursed\",total_amount:card.physicalCardDisbursed,percentage:card.percentagePhysicalCard},{name:\"Total Volume of Active Cards\",total_amount:card.volOfActiveCard,percentage:card.percentageActiveCard},{name:\"Total Volume of Users with Cards\",total_amount:card.volOfCardUsers,percentage:card.percentVolOfCardUser}];var updateDays=function updateDays(day,index){if(filterText!==text[index]){setCard(\"\");setCardData(\"\");setDays(day);setFilterText(text[index]);}};useEffect(function(){setCard(\"\");setCardData(\"\");getRecentCardRequestsList();},[showCustomerDetails]);useEffect(function(){getRecentCardRequestsList();},[days]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,{logo:logo,name:\"Card Analytics\",calendar:true,filterText:filterText,updateDays:updateDays,refresh:refresh}),!showCustomerDetails?/*#__PURE__*/React.createElement(React.Fragment,null,card.length!==0?/*#__PURE__*/React.createElement(Statistics,{transactions:transactions}):/*#__PURE__*/React.createElement(Loader,null),/*#__PURE__*/React.createElement(Table,{tableData:cardData,setShowCustomerDetails:setShowCustomerDetails,setDetails:setDetails})):/*#__PURE__*/React.createElement(CustomerDetails,{setShowCustomerDetails:setShowCustomerDetails,details:details}));};export default CardManagement;","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/src/pages/dashboards/Card Management/index.js"],"names":["React","useState","useEffect","Header","Statistics","Table","cardRequests","Loader","CustomerDetails","CardManagement","card","setCard","cardData","setCardData","showCustomerDetails","setShowCustomerDetails","details","setDetails","days","setDays","text","filterText","setFilterText","getAllCards","getRecentCardRequestsList","response","code","console","log","data","allCardRequests","refresh","transactions","name","total_amount","volOfVirtualCardRequest","percentage","percentVirtualCardRequest","virtualCardDisbursed","percentageVirtualCard","physicalCardDisbursed","percentagePhysicalCard","volOfActiveCard","percentageActiveCard","volOfCardUsers","percentVolOfCardUser","updateDays","day","index","logo","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Header from \"../../../components/Header\";\nimport Statistics from \"./Statistics\";\nimport Table from \"./Table\";\nimport logo from \"../../../assets/img/icons/referralicon.svg\";\nimport cardRequests from \"./../../../requests/card-management\";\nimport Loader from \"../../../components/Loader\";\nimport CustomerDetails from \"./CustomerDetails\";\n\nconst CardManagement = () => {\n  const [card, setCard] = useState(\"\");\n  const [cardData, setCardData] = useState(\"\");\n  const [showCustomerDetails, setShowCustomerDetails] = useState(false);\n  const [details, setDetails] = useState({});\n  const [days, setDays] = useState(30);\n  const text = [\"Today   \", \"Last 7 Days\", \"Last 30 days\", \"Last 90 Days\"];\n  const [filterText, setFilterText] = useState(text[2]);\n  const { getAllCards } = cardRequests();\n\n  const getRecentCardRequestsList = async () => {\n    const response = await getAllCards(days);\n    if (response.code === \"00\") {\n      console.log(response.data);\n      console.log(response.data.allCardRequests);\n      setCard(response.data);\n      setCardData(response.data.allCardRequests);\n    }\n  };\n\n  const refresh = () => {\n    setCard(\"\");\n    setCardData(\"\");\n    getRecentCardRequestsList();\n  };\n\n  const transactions = [\n    {\n      name: \"Total Virtual Card Request\",\n      total_amount: card.volOfVirtualCardRequest,\n      percentage: card.percentVirtualCardRequest,\n    },\n    {\n      name: \"Total Physical Card Request\",\n      total_amount: \"0\",\n      percentage: \"0\",\n    },\n    {\n      name: \"Total Virtual Card Disbursed\",\n      total_amount: card.virtualCardDisbursed,\n      percentage: card.percentageVirtualCard,\n    },\n    {\n      name: \"Total Physical Card Disbursed\",\n      total_amount: card.physicalCardDisbursed,\n      percentage: card.percentagePhysicalCard,\n    },\n    {\n      name: \"Total Volume of Active Cards\",\n      total_amount: card.volOfActiveCard,\n      percentage: card.percentageActiveCard,\n    },\n    {\n      name: \"Total Volume of Users with Cards\",\n      total_amount: card.volOfCardUsers,\n      percentage: card.percentVolOfCardUser,\n    },\n  ];\n  const updateDays = (day, index) => {\n    if (filterText !== text[index]) {\n      setCard(\"\");\n      setCardData(\"\");\n      setDays(day);\n      setFilterText(text[index]);\n    }\n  };\n  useEffect(() => {\n    setCard(\"\");\n    setCardData(\"\");\n    getRecentCardRequestsList();\n  }, [showCustomerDetails]);\n\n  useEffect(() => {\n    getRecentCardRequestsList();\n  }, [days]);\n  return (\n    <div>\n      <Header\n        logo={logo}\n        name=\"Card Analytics\"\n        calendar\n        filterText={filterText}\n        updateDays={updateDays}\n        refresh={refresh}\n      />\n      {!showCustomerDetails ? (\n        <>\n          {card.length !== 0 ? (\n            <Statistics transactions={transactions} />\n          ) : (\n            <Loader />\n          )}\n          <Table\n            tableData={cardData}\n            setShowCustomerDetails={setShowCustomerDetails}\n            setDetails={setDetails}\n          />\n        </>\n      ) : (\n        <CustomerDetails\n          setShowCustomerDetails={setShowCustomerDetails}\n          details={details}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default CardManagement;\n"]},"metadata":{},"sourceType":"module"}