{"ast":null,"code":"import _slicedToArray from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{BrowserRouter as Router,Route,Switch,Redirect}from\"react-router-dom\";import{connect}from\"react-redux\";import{dashboard as dashboardRoutes,page as pageRoutes,customer as customerDetails}from\"./index\";import DashboardLayout from\"../layouts/Dashboard\";import AuthLayout from\"../layouts/Auth\";import Page404 from\"../pages/auth/Page404\";import ScrollToTop from\"../components/ScrollToTop\";var childRoutes=function childRoutes(Layout,routes,user){return routes.map(function(_ref,index){var children=_ref.children,path=_ref.path,Component=_ref.component;return children?// Route item with children\nchildren.map(function(_ref2,index){var path=_ref2.path,Component=_ref2.component;return/*#__PURE__*/React.createElement(Route,{key:index,path:path,exact:true,render:function render(props){return user?/*#__PURE__*/React.createElement(Layout,null,/*#__PURE__*/React.createElement(Component,props)):/*#__PURE__*/React.createElement(Redirect,{to:\"/auth/sign-in\"});}});}):/*#__PURE__*/ // Route item without children\nReact.createElement(Route,{key:index,path:path,exact:true,render:function render(props){return user?/*#__PURE__*/React.createElement(Layout,null,/*#__PURE__*/React.createElement(Component,props)):/*#__PURE__*/React.createElement(Redirect,{to:\"/auth/sign-in\"});}});});};var Routes=function Routes(_ref3){var user=_ref3.user;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),time=_useState2[0],setTime=_useState2[1];var redirect=function redirect(){if(time>29)window.location.pathname=\"/\";setTimeout(function(){if(user){setTime(function(time){return time+1;});}},60000);};useEffect(function(){redirect();},[user,time]);return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(ScrollToTop,null,/*#__PURE__*/React.createElement(Switch,null,childRoutes(DashboardLayout,dashboardRoutes,user),childRoutes(DashboardLayout,customerDetails,user),childRoutes(AuthLayout,pageRoutes,true),/*#__PURE__*/React.createElement(Route,{render:function render(){return/*#__PURE__*/React.createElement(AuthLayout,null,/*#__PURE__*/React.createElement(Page404,null));}}))));};var mapStateToProps=function mapStateToProps(state){var _state$user$details;return{user:(_state$user$details=state.user.details)===null||_state$user$details===void 0?void 0:_state$user$details.token};};export default connect(mapStateToProps)(Routes);","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/src/routes/Routes.js"],"names":["React","useState","useEffect","BrowserRouter","Router","Route","Switch","Redirect","connect","dashboard","dashboardRoutes","page","pageRoutes","customer","customerDetails","DashboardLayout","AuthLayout","Page404","ScrollToTop","childRoutes","Layout","routes","user","map","index","children","path","Component","component","props","Routes","time","setTime","redirect","window","location","pathname","setTimeout","mapStateToProps","state","details","token"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route,\r\n  Switch,\r\n  Redirect,\r\n} from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  dashboard as dashboardRoutes,\r\n  page as pageRoutes,\r\n  customer as customerDetails,\r\n} from \"./index\";\r\nimport DashboardLayout from \"../layouts/Dashboard\";\r\nimport AuthLayout from \"../layouts/Auth\";\r\nimport Page404 from \"../pages/auth/Page404\";\r\n\r\nimport ScrollToTop from \"../components/ScrollToTop\";\r\n\r\nconst childRoutes = (Layout, routes, user) =>\r\n  routes.map(({ children, path, component: Component }, index) =>\r\n    children ? (\r\n      // Route item with children\r\n      children.map(({ path, component: Component }, index) => (\r\n        <Route\r\n          key={index}\r\n          path={path}\r\n          exact\r\n          render={(props) =>\r\n            user ? (\r\n              <Layout>\r\n                <Component {...props} />\r\n              </Layout>\r\n            ) : (\r\n              <Redirect to=\"/auth/sign-in\" />\r\n            )\r\n          }\r\n        />\r\n      ))\r\n    ) : (\r\n      // Route item without children\r\n      <Route\r\n        key={index}\r\n        path={path}\r\n        exact\r\n        render={(props) =>\r\n          user ? (\r\n            <Layout>\r\n              <Component {...props} />\r\n            </Layout>\r\n          ) : (\r\n            <Redirect to=\"/auth/sign-in\" />\r\n          )\r\n        }\r\n      />\r\n    )\r\n  );\r\n\r\nconst Routes = ({ user }) => {\r\n  const [time, setTime] = useState(0);\r\n  const redirect = () => {\r\n    if (time > 29) window.location.pathname = \"/\";\r\n    setTimeout(() => {\r\n      if (user) {\r\n        setTime((time) => time + 1);\r\n      }\r\n    }, 60000);\r\n  };\r\n  useEffect(() => {\r\n    redirect();\r\n  }, [user, time]);\r\n\r\n  return (\r\n    <Router>\r\n      <ScrollToTop>\r\n        <Switch>\r\n          {childRoutes(DashboardLayout, dashboardRoutes, user)}\r\n          {childRoutes(DashboardLayout, customerDetails, user)}\r\n          {childRoutes(AuthLayout, pageRoutes, true)}\r\n          <Route\r\n            render={() => (\r\n              <AuthLayout>\r\n                <Page404 />\r\n              </AuthLayout>\r\n            )}\r\n          />\r\n        </Switch>\r\n      </ScrollToTop>\r\n    </Router>\r\n  );\r\n};\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user.details?.token,\r\n});\r\n\r\nexport default connect(mapStateToProps)(Routes);\r\n"]},"metadata":{},"sourceType":"module"}