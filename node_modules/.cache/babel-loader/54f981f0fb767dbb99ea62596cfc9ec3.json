{"ast":null,"code":"import _defineProperty from \"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /OLUYEMI SETTL TESTING FOR ADMIN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /OLUYEMI SETTL TESTING FOR ADMIN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /OLUYEMI SETTL TESTING FOR ADMIN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /OLUYEMI SETTL TESTING FOR ADMIN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /OLUYEMI SETTL TESTING FOR ADMIN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /OLUYEMI SETTL TESTING FOR ADMIN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /OLUYEMI SETTL TESTING FOR ADMIN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /OLUYEMI SETTL TESTING FOR ADMIN/src/components/Auth/ForgetPasword.js\";\nimport React, { Component } from \"react\";\nimport { Modal, ModalBody } from \"reactstrap\";\nimport \"./ForgetPasword.scss\";\nimport Loading from \"../../components/Loading\";\nimport { Auth } from \"../../requests/auth\";\nimport { connect } from \"react-redux\";\nimport { ReactComponent as DangerIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/img/icons/danger.svg\";\nimport { ReactComponent as Close } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/img/icons/close.svg\";\nimport { TabContent, TabPane } from \"reactstrap\";\nimport OtpInput from \"react-otp-input\";\nimport SuccessDialog from \"../../pages/SuccessDialog\";\nimport FailureDialog from \"../../pages/FailureDialog\";\n\nvar ForgetPassword = /*#__PURE__*/function (_Component) {\n  _inherits(ForgetPassword, _Component);\n\n  var _super = _createSuper(ForgetPassword);\n\n  function ForgetPassword(props) {\n    var _this;\n\n    _classCallCheck(this, ForgetPassword);\n\n    _this = _super.call(this, props);\n\n    _this.toggle = function () {\n      _this.setState({\n        modal: !_this.state.modal,\n        activeTab: \"1\"\n      });\n    };\n\n    _this.toggleModal = function () {\n      _this.setState({\n        isOpenModal: !_this.state.isOpenModal\n      });\n    };\n\n    _this.handleSubmit = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n\n                _this.setState({\n                  loading: true\n                });\n\n                _context.next = 4;\n                return Auth(\"send/otp\", {\n                  email: _this.state.email,\n                  otpType: 3\n                });\n\n              case 4:\n                response = _context.sent;\n\n                if (response.code === \"00\") {\n                  _this.setState({\n                    activeTab: \"2\"\n                  });\n\n                  _this.setState({\n                    isOpenModal: true\n                  });\n\n                  _this.setState({\n                    loading: false\n                  });\n                } else {\n                  _this.setState({\n                    loading: false\n                  });\n\n                  _this.setState({\n                    emailError: response\n                  });\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.verifyOTP = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                e.preventDefault();\n\n                _this.setState({\n                  loading: true\n                });\n\n                _context2.next = 4;\n                return Auth(\"verify/otp\", {\n                  email: _this.state.email,\n                  otpNumber: _this.state.value,\n                  phone: _this.props.phone\n                });\n\n              case 4:\n                response = _context2.sent;\n\n                if (response.code === \"00\") {\n                  window.location.pathname = \"/auth/set-new-password\";\n                  window.localStorage.setItem(\"emailAdress\", _this.state.email);\n                  window.localStorage.setItem(\"otp\", _this.state.value);\n\n                  _this.props.setUserDetails({\n                    otpNumber: _this.state.value\n                  });\n\n                  _this.setState({\n                    loading: false\n                  });\n                } else {\n                  _this.setState({\n                    error: response\n                  });\n                }\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.state = {\n      modal: false,\n      activeTab: \"1\",\n      value: \"\",\n      email: \"\",\n      loading: false,\n      toggleBtn: false,\n      isOpenModal: false,\n      error: null,\n      emailError: null,\n      secondActiveTab: \"3\"\n    };\n    return _this;\n  }\n\n  _createClass(ForgetPassword, [{\n    key: \"render\",\n    value: function render() {\n      var _ref3,\n          _this2 = this;\n\n      var loading = this.state.loading;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"forget_login\",\n        onClick: this.toggle,\n        style: {\n          cursor: \"pointer\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 9\n        }\n      }, \"Forget pasword?\"), /*#__PURE__*/React.createElement(Modal, {\n        id: \"modal_section\",\n        isOpen: this.state.modal,\n        toggle: this.toggle,\n        size: \"lg\",\n        centered: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Close, {\n        style: {\n          position: \"absolute\",\n          top: \"20px\",\n          right: \"20px\",\n          cursor: \"pointer\"\n        },\n        onClick: this.toggle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(TabContent, {\n        activeTab: this.state.activeTab,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(TabPane, {\n        tabId: \"1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        \"data-test\": \"modal-header\",\n        id: \"close\",\n        className: \"modal-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"modal-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-center forget_pass_title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 23\n        }\n      }, \"Forgot Password\"))))), /*#__PURE__*/React.createElement(ModalBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"well\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 19\n        }\n      }, \"Provide your admin email address, an OTP will be sent for verification\"), this.state.emailError && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-center align-items-center mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-center align-items-center\",\n        style: (_ref3 = {\n          backgroundColor: \"green\",\n          padding: \"0.5rem\"\n        }, _defineProperty(_ref3, \"backgroundColor\", \"#ffc7ca\"), _defineProperty(_ref3, \"borderRadius\", \"10px\"), _defineProperty(_ref3, \"border\", \"1px solid #fc5159\"), _ref3),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 24\n        }\n      }, /*#__PURE__*/React.createElement(DangerIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          color: \"#fc5159\",\n          marginLeft: \"0.5rem\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 23\n        }\n      }, this.state.email === \"\" ? \"Please enter a valid email address\" : this.state.emailError))), /*#__PURE__*/React.createElement(\"fieldset\", {\n        className: \"float-label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        name: \"Email address\",\n        autoComplete: \"off\",\n        type: \"text\",\n        className: \"form-control shadow-none\",\n        required: true,\n        onChange: function onChange(e) {\n          return _this2.setState({\n            email: e.target.value\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"Email_address\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }\n      }, \"Email address\")))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\",\n        style: {\n          margin: \"1rem\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"forget-password\",\n        disabled: loading,\n        onClick: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 17\n        }\n      }, loading ? /*#__PURE__*/React.createElement(Loading, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 30\n        }\n      }) : \"Continue\"))), /*#__PURE__*/React.createElement(TabPane, {\n        tabId: \"2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(SuccessDialog, {\n        title: \"OTP code sent\",\n        details: \"Check your email, we\\u2019ve sent you a code to reset your password\",\n        isOpen: this.state.isOpenModal,\n        toggle: this.toggleModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }\n      }), this.state.error && /*#__PURE__*/React.createElement(FailureDialog, {\n        isOpen: this.state.isOpenModal,\n        toggle: this.toggleModal,\n        title: \"Invalid OTP code\",\n        details: this.state.error.message,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        \"data-test\": \"modal-header\",\n        id: \"close\",\n        className: \"modal-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"modal-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-center forget_pass_title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 23\n        }\n      }, \"OTP Verification\"))))), /*#__PURE__*/React.createElement(ModalBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"well\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 19\n        }\n      }, \"Enter the otp code sent to\"), /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontSize: \"17px\",\n          fontWeight: \"500\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 19\n        }\n      }, this.state.email), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(OtpInput, {\n        shouldAutoFocus: true,\n        className: \"otp_sty\",\n        numInputs: 6,\n        value: this.state.value,\n        otpType: \"password\",\n        disabled: false,\n        secure: true,\n        onChange: function onChange(e) {\n          return _this2.setState({\n            value: e\n          });\n        },\n        separator: /*#__PURE__*/React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 34\n          }\n        }, \"  \"),\n        isInputSecure: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 21\n        }\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\",\n        style: {\n          margin: \"1rem\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"forget-password\",\n        onClick: this.verifyOTP,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 17\n        }\n      }, loading ? /*#__PURE__*/React.createElement(Loading, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 30\n        }\n      }) : \"Continue\"))))));\n    }\n  }]);\n\n  return ForgetPassword;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var _state$user, _state$user$details, _state$user$details$a;\n\n  return {\n    phone: (_state$user = state.user) === null || _state$user === void 0 ? void 0 : (_state$user$details = _state$user.details) === null || _state$user$details === void 0 ? void 0 : (_state$user$details$a = _state$user$details.admin) === null || _state$user$details$a === void 0 ? void 0 : _state$user$details$a.phoneNumber\n  };\n};\n\nexport default connect(mapStateToProps, null)(ForgetPassword);","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /OLUYEMI SETTL TESTING FOR ADMIN/src/components/Auth/ForgetPasword.js"],"names":["React","Component","Modal","ModalBody","Loading","Auth","connect","TabContent","TabPane","OtpInput","SuccessDialog","FailureDialog","ForgetPassword","props","toggle","setState","modal","state","activeTab","toggleModal","isOpenModal","handleSubmit","e","preventDefault","loading","email","otpType","response","code","emailError","verifyOTP","otpNumber","value","phone","window","location","pathname","localStorage","setItem","setUserDetails","error","toggleBtn","secondActiveTab","cursor","position","top","right","backgroundColor","padding","color","marginLeft","target","margin","message","fontSize","fontWeight","mapStateToProps","user","details","admin","phoneNumber"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Modal, ModalBody } from \"reactstrap\";\nimport \"./ForgetPasword.scss\";\nimport Loading from \"../../components/Loading\";\nimport { Auth } from \"../../requests/auth\"\nimport { connect } from \"react-redux\";\nimport { ReactComponent as DangerIcon } from \"../../assets/img/icons/danger.svg\";\nimport { ReactComponent as Close } from \"../../assets/img/icons/close.svg\";\nimport { TabContent, TabPane } from \"reactstrap\";\nimport OtpInput from \"react-otp-input\";\nimport SuccessDialog from \"../../pages/SuccessDialog\";\nimport FailureDialog from \"../../pages/FailureDialog\";\nclass ForgetPassword extends Component {\n  constructor(props) {\n      super(props);\n      this.state = {\n        modal: false,\n        activeTab: \"1\",\n        value: \"\",\n        email: \"\",\n        loading: false,\n        toggleBtn:  false,\n        isOpenModal:  false,\n        error:null,\n        emailError: null,\n        secondActiveTab: \"3\"\n        \n      };\n\n  }\n \n  toggle = () => {\n    this.setState({\n      modal: !this.state.modal,\n      activeTab: \"1\",\n    });\n  };\n\n toggleModal = () => {\n   this.setState({\n   isOpenModal: !this.state.isOpenModal,\n\n  })\n}\n\n\n  handleSubmit = async (e) => {\n    e.preventDefault();\n   \n   \n    this.setState({loading: true})\n   const response = await Auth(\"send/otp\", {email: this.state.email, otpType: 3});\n\n   if(response.code === \"00\") {\n     this.setState({ activeTab: \"2\" })\n     this.setState({isOpenModal: true})\n     this.setState({loading: false})\n\n   }else{\n     this.setState({loading: false})\n     this.setState({emailError:response})\n   }\n  }\n\n  verifyOTP = async (e) => {\n     e.preventDefault();\n     \n     this.setState({loading: true})\n     const response = await Auth(\"verify/otp\", {email: this.state.email, otpNumber:this.state.value, phone:this.props.phone});\n     if(response.code === \"00\") {\n      window.location.pathname = \"/auth/set-new-password\"\n      window.localStorage.setItem(\"emailAdress\", this.state.email)\n      window.localStorage.setItem(\"otp\",this.state.value )\n      this.props.setUserDetails({ otpNumber:this.state.value})\n      this.setState({loading: false})\n    }else{\n      this.setState({error:response})\n    }\n  }\n\n  render() {\n    const {loading} = this.state\n    return (\n      <div>\n        <span\n          className=\"forget_login\"\n          onClick={this.toggle}\n          style={{ cursor: \"pointer\" }}\n        >\n          Forget pasword?\n        </span>\n        <Modal\n          id=\"modal_section\"\n          isOpen={this.state.modal}\n          toggle={this.toggle}\n          size=\"lg\"\n          centered\n        >\n          <Close\n            style={{\n              position: \"absolute\",\n              top: \"20px\",\n              right: \"20px\",\n              cursor: \"pointer\",\n\n            }}\n            onClick={this.toggle}\n          />\n\n          <TabContent activeTab={this.state.activeTab}>\n            <TabPane tabId=\"1\">\n              <div>\n                <div\n                  data-test=\"modal-header\"\n                  id=\"close\"\n                  className=\"modal-header\"\n                >\n                  <h4 className=\"modal-title\">\n                    <div className=\"text-center forget_pass_title\">\n                      <h1>Forgot Password</h1>\n                    </div>\n                  </h4>\n                </div>\n              </div>\n              <ModalBody>\n                <div className=\"well\">\n                  <p>\n                  Provide your admin email address, an OTP will be sent for verification\n                  </p>\n                  {this.state.emailError && (\n                      <div className=\"d-flex justify-content-center align-items-center mt-3\">\n                       <div\n                      className=\"d-flex justify-content-center align-items-center\"\n                      style={{\n                        backgroundColor: \"green\",\n                        padding: \"0.5rem\",\n                        backgroundColor: \"#ffc7ca\",\n                        borderRadius: \"10px\",\n                        border: \"1px solid #fc5159\",\n                      }}\n                    >\n                      <DangerIcon />\n                      <span style={{ color: \"#fc5159\", marginLeft: \"0.5rem\" }}>\n                         {this.state.email  === \"\"? \"Please enter a valid email address\": this.state.emailError }\n                      </span>\n                    </div>\n                  </div>\n                )}\n                  \n                  <fieldset className=\"float-label\">\n                    <input\n                      name=\"Email address\"\n                      autoComplete=\"off\"\n                      type=\"text\"\n                      className=\"form-control shadow-none\"\n                      required\n                      onChange={(e) => this.setState({email: e.target.value})}\n                    />\n                    <label htmlFor=\"Email_address\">Email address</label>\n                  </fieldset>\n                \n                  \n                </div>\n              </ModalBody>\n              <div\n                className=\"\"\n                style={{\n                  margin: \"1rem\",\n                }}\n              >\n                <button\n                  type=\"submit\"\n                  className=\"forget-password\"\n                  disabled={loading}\n                  onClick = {this.handleSubmit}\n                >\n                  {loading ? <Loading /> : \"Continue\"}\n                </button>\n              \n              </div>\n            </TabPane>\n          \n            <TabPane tabId=\"2\"> \n            <SuccessDialog title=\"OTP code sent\" details=\"Check your email, we’ve sent you a code to reset your password\" isOpen={this.state.isOpenModal} \n            toggle={this.toggleModal}/>\n            {\n              this.state.error && (\n                <FailureDialog\n                isOpen={this.state.isOpenModal} \n                toggle={this.toggleModal}\n                title=\"Invalid OTP code\"\n                details={this.state.error.message}\n      />\n              )\n            }\n            \n              <div>\n              \n                <div\n                  data-test=\"modal-header\"\n                  id=\"close\"\n                  className=\"modal-header\"\n                >\n                  <h4 className=\"modal-title\">\n                    <div className=\"text-center forget_pass_title\">\n                      <h1>OTP Verification</h1>\n                    </div>\n                  </h4>\n                </div>\n              </div>\n              <ModalBody>\n                <div className=\"well\">\n                  <p>Enter the otp code sent to</p>\n                  <p style={{fontSize: \"17px\", fontWeight: \"500\"}}>{this.state.email}</p>\n                \n                  <div className=\"d-flex justify-content-center\">\n                    <OtpInput\n                      shouldAutoFocus\n                      className=\"otp_sty\"\n                      numInputs={6}\n                      value={this.state.value}\n                      otpType=\"password\"\n                      disabled={false}\n                      secure={true}\n                      onChange={(e) => this.setState({ value: e})}\n                      separator={<span>{\"  \"}</span>}\n                      isInputSecure\n                    />\n                  </div>\n                \n                </div>\n              </ModalBody>\n              <div\n                className=\"\"\n                style={{\n                  margin: \"1rem\",\n                }}\n              >\n                <button type=\"submit\" className=\"forget-password\" onClick={this.verifyOTP}>\n                  {loading ? <Loading /> : \"Continue\"}\n                </button>\n              </div>\n            </TabPane>\n          </TabContent>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  phone: state.user?.details?.admin?.phoneNumber\n})\n\n\n\nexport default connect(mapStateToProps, null)(ForgetPassword)\n"]},"metadata":{},"sourceType":"module"}