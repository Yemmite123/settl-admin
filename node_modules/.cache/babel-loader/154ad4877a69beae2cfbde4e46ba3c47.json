{"ast":null,"code":"import _regeneratorRuntime from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{connect}from\"react-redux\";import Loading from\"../../components/Loading\";import SuccessDialog from\"../../pages/SuccessDialog\";import{Button,Modal,ModalBody,ModalHeader,Form,FormGroup,Label}from\"reactstrap\";import InputBox from\"../../components/InputBox\";import request from\"../../requests/customer\";var DebitWalletDialog=function DebitWalletDialog(props){var _request=request(),creditOrDebitCustomer=_request.creditOrDebitCustomer;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),reason=_useState4[0],setReason=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),successModal=_useState6[0],setSuccessModal=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();if(reason.length<-1||reason.length===0){setError(\"The Reason field is required.\");}else{setError(\"\");}setLoading(true);_context.next=5;return creditOrDebitCustomer({transId:props.transRef,fullName:props.fullName,adminEmail:props.email,amount:props.amount,reason:reason,customerPhoneNo:props.phoneNo,transactionType:2});case 5:response=_context.sent;if(response.code===\"00\"){setLoading(false);setMessage(response.data);setSuccessModal(true);}else{setLoading(false);}case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var toggle=function toggle(){return setSuccessModal(function(prevState){return!prevState;});};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(SuccessDialog,{title:\"Wallet successfully debited\",details:message,isOpen:successModal,toggle:toggle}),/*#__PURE__*/React.createElement(Modal,{isOpen:props.isOpen,toggle:props.toggle,className:\"admin-modal freeze-modal debit-modal\"},/*#__PURE__*/React.createElement(ModalHeader,null,\"Debit Customer Wallet \"),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},/*#__PURE__*/React.createElement(\"p\",null,\"You are about to fund a customer wallet\")),/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(InputBox,{type:\"text\",name:\"transactionRef\",id:\"transactionRef\",value:props.transRef}),/*#__PURE__*/React.createElement(Label,{for:\"transactionRef\"},\"Transaction Reference\")),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(InputBox,{type:\"text\",name:\"amount\",id:\"amount\",value:\"\\u20A6 \".concat(props.amount)}),/*#__PURE__*/React.createElement(Label,{for:\"amount\"},\"Amount\")),/*#__PURE__*/React.createElement(FormGroup,{className:\"pb-3\"},/*#__PURE__*/React.createElement(InputBox,{type:\"textarea\",name:\"reason\",id:\"reason\",value:reason,rows:\"4\",onChange:function onChange(e){return setReason(e.target.value);}}),/*#__PURE__*/React.createElement(Label,{for:\"reason\"},\"Reason why this is been initiated...\"))),/*#__PURE__*/React.createElement(\"p\",{className:\"text-danger\"},error),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(Button,{color:\"info\",className:\"btn-cancel\",onClick:props.toggle},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{color:\"primary\",className:\"btn-add cursor-pointer\",type:\"submit\",onClick:function onClick(event){return handleSubmit(event);}},loading?/*#__PURE__*/React.createElement(Loading,null):\"Debit wallet\"))))));};var mapStateToProps=function mapStateToProps(state){var _state$user,_state$user$details,_state$user$details$a;return{email:(_state$user=state.user)===null||_state$user===void 0?void 0:(_state$user$details=_state$user.details)===null||_state$user$details===void 0?void 0:(_state$user$details$a=_state$user$details.admin)===null||_state$user$details$a===void 0?void 0:_state$user$details$a.email};};export default connect(mapStateToProps,null)(DebitWalletDialog);","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/src/pages/customers/DebitWalletDialog.js"],"names":["React","useState","connect","Loading","SuccessDialog","Button","Modal","ModalBody","ModalHeader","Form","FormGroup","Label","InputBox","request","DebitWalletDialog","props","creditOrDebitCustomer","loading","setLoading","reason","setReason","successModal","setSuccessModal","message","setMessage","error","setError","handleSubmit","event","preventDefault","length","transId","transRef","fullName","adminEmail","email","amount","customerPhoneNo","phoneNo","transactionType","response","code","data","toggle","prevState","isOpen","e","target","value","mapStateToProps","state","user","details","admin"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport Loading from \"../../components/Loading\";\nimport SuccessDialog from \"../../pages/SuccessDialog\";\nimport {\n  Button,\n  Modal,\n  ModalBody,\n  ModalHeader,\n  Form,\n  FormGroup,\n  Label,\n} from \"reactstrap\";\nimport InputBox from \"../../components/InputBox\";\nimport request from \"../../requests/customer\";\n\nconst DebitWalletDialog = (props) => {\n  const { creditOrDebitCustomer } = request();\n  const [loading, setLoading] = useState(false);\n  const [reason, setReason] = useState(\"\");\n  const [successModal, setSuccessModal] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    if (reason.length < -1 || reason.length === 0) {\n      setError(\"The Reason field is required.\");\n    } else {\n      setError(\"\");\n    }\n    setLoading(true);\n\n    const response = await creditOrDebitCustomer({\n      transId: props.transRef,\n      fullName: props.fullName,\n      adminEmail: props.email,\n      amount: props.amount,\n      reason: reason,\n      customerPhoneNo: props.phoneNo,\n      transactionType: 2,\n    });\n\n    if (response.code === \"00\") {\n      setLoading(false);\n      setMessage(response.data);\n      setSuccessModal(true);\n    } else {\n      setLoading(false);\n    }\n  };\n\n  const toggle = () => setSuccessModal((prevState) => !prevState);\n\n  return (\n    <>\n      <SuccessDialog\n        title=\"Wallet successfully debited\"\n        details={message}\n        isOpen={successModal}\n        toggle={toggle}\n      />\n      <Modal\n        isOpen={props.isOpen}\n        toggle={props.toggle}\n        className=\"admin-modal freeze-modal debit-modal\"\n      >\n        <ModalHeader>Debit Customer Wallet </ModalHeader>\n        <ModalBody>\n          <div>\n            <div className=\"text-center\">\n              <p>You are about to fund a customer wallet</p>\n            </div>\n            <Form>\n              <FormGroup>\n                <InputBox\n                  type=\"text\"\n                  name=\"transactionRef\"\n                  id=\"transactionRef\"\n                  value={props.transRef}\n                />\n                <Label for=\"transactionRef\">Transaction Reference</Label>\n              </FormGroup>\n              <FormGroup>\n                <InputBox\n                  type=\"text\"\n                  name=\"amount\"\n                  id=\"amount\"\n                  value={`₦ ${props.amount}`}\n                />\n                <Label for=\"amount\">Amount</Label>\n              </FormGroup>\n              <FormGroup className=\"pb-3\">\n                <InputBox\n                  type=\"textarea\"\n                  name=\"reason\"\n                  id=\"reason\"\n                  value={reason}\n                  rows=\"4\"\n                  onChange={(e) => setReason(e.target.value)}\n                />\n                <Label for=\"reason\">Reason why this is been initiated...</Label>\n              </FormGroup>\n            </Form>\n            <p className=\"text-danger\">{error}</p>\n            <hr />\n            <div className=\"d-flex justify-content-between\">\n              <Button\n                color=\"info\"\n                className=\"btn-cancel\"\n                onClick={props.toggle}\n              >\n                Cancel\n              </Button>\n              <Button\n                color=\"primary\"\n                className=\"btn-add cursor-pointer\"\n                type=\"submit\"\n                onClick={(event) => handleSubmit(event)}\n              >\n                {loading ? <Loading /> : \"Debit wallet\"}\n              </Button>\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    </>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  email: state.user?.details?.admin?.email,\n});\n\nexport default connect(mapStateToProps, null)(DebitWalletDialog);\n"]},"metadata":{},"sourceType":"module"}