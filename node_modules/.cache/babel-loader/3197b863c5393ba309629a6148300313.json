{"ast":null,"code":"import _slicedToArray from \"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settladminfront-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settladminfront-end/src/pages/dashboards/Wallet Savings /Table.js\";\n\nimport React, { useState } from \"react\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport ToolkitProvider from \"react-bootstrap-table2-toolkit\";\nimport Header from \"./TableHeader\";\nimport Loader from \"../../../components/Loader\";\nimport { useAPI } from \"../../../contexts/WalletContext.js\";\n\nvar Table = function Table(_ref) {\n  var setShowCustomerDetails = _ref.setShowCustomerDetails,\n      setDetails = _ref.setDetails;\n\n  var _useAPI = useAPI(),\n      walletData = _useAPI.walletData;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isfiltered = _useState2[0],\n      setIsFiltered = _useState2[1];\n\n  var _useState3 = useState(walletData.listOfSavingstrans),\n      _useState4 = _slicedToArray(_useState3, 2),\n      data = _useState4[0],\n      setData = _useState4[1];\n\n  console.log(walletData.listOfSavingstrans);\n  console.log(data);\n  var currentDate = new Date();\n  var currentDateFormat = currentDate.setHours(0, 0, 0, 0);\n\n  var SearchFilter = function SearchFilter(data) {\n    var filter = walletData.listOfSavingstrans;\n\n    if (data.name === \"Transaction Refernce\") {\n      filter = walletData.listOfSavingstrans.filter(function (product) {\n        return product.transId.toLowerCase().startsWith(data.value.trim());\n      });\n    }\n\n    if (data.name === \"Customer's phone number\") {\n      filter = walletData.listOfSavingstrans.filter(function (product) {\n        return product.customerId.startsWith(data.value.trim());\n      });\n    }\n\n    setData(filter);\n  };\n\n  var Filter = function Filter(data) {\n    setData(\"\");\n    var check = data.status.length > 0 || data.startDate !== currentDateFormat || data.endDate !== currentDateFormat;\n    setTimeout(function () {\n      var filtered = walletData.listOfSavingstrans.filter(function (product) {\n        console.log(product);\n\n        if (check) {\n          setIsFiltered(true);\n          var productDate = new Date(product.transDate).setHours(0, 0, 0, 0);\n          return data.status.includes(product.transStatus.toLowerCase()) || productDate >= data.startDate && productDate <= data.endDate;\n        } else {\n          setIsFiltered(false);\n          return product;\n        }\n      });\n      setData(filtered);\n    }, 500);\n  };\n\n  var columns = [{\n    dataField: \"id\",\n    text: \"#\",\n    headerStyle: {\n      backgroundColor: \"#F8F9FA\",\n      border: \"none\",\n      fontSize: \"12px\",\n      width: \"70px\",\n      textAlign: \"center\"\n    },\n    formatter: function formatter(cell, row, rowIndex) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: \"d-flex justify-content-center\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }\n      }, rowIndex + 1);\n    }\n  }, {\n    dataField: \"fromcustomerName\",\n    text: \"Customer\",\n    headerStyle: {\n      backgroundColor: \"#F8F9FA\",\n      border: \"none\",\n      fontSize: \"12px\"\n    }\n  }, {\n    dataField: \"transAmount\",\n    text: \"Amount\",\n    headerStyle: {\n      backgroundColor: \"#F8F9FA\",\n      border: \"none\",\n      fontSize: \"12px\"\n    },\n    formatter: function formatter(cell) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 28\n        }\n      }, \"\\u20A6\", cell.toLocaleString());\n    }\n  }, {\n    dataField: \"transId\",\n    text: \"Tranx Ref\",\n    headerStyle: {\n      backgroundColor: \"#F8F9FA\",\n      border: \"none\",\n      fontSize: \"12px\"\n    }\n  }, {\n    dataField: \"customerId\",\n    text: \"Customer Phone Number\",\n    headerStyle: {\n      backgroundColor: \"#F8F9FA\",\n      border: \"none\",\n      fontSize: \"11px\"\n    }\n  }, {\n    dataField: \"transStatus\",\n    text: \"Status\",\n    headerStyle: {\n      backgroundColor: \"#F8F9FA\",\n      border: \"none\",\n      fontSize: \"12px\",\n      textAlign: \"center\"\n    },\n    style: function style() {\n      return {\n        margin: \"auto 0\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        padding: \"20px 0\"\n      };\n    },\n    formatter: function formatter(cell, row, rowIndex) {\n      if (cell.toLowerCase() === \"success\") {\n        return /*#__PURE__*/React.createElement(\"span\", {\n          className: \" status success\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 18\n          }\n        }, cell);\n      }\n\n      if (cell.toLowerCase() === \"refunded\") {\n        return /*#__PURE__*/React.createElement(\"span\", {\n          className: \"status registered\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 18\n          }\n        }, cell);\n      }\n\n      if (cell.toLowerCase() === \"failed\") {\n        return /*#__PURE__*/React.createElement(\"span\", {\n          className: \"status failed\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 18\n          }\n        }, cell);\n      }\n    }\n  }];\n\n  var customTotal = function customTotal(from, to, size) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"react-bootstrap-table-pagination-total\",\n      style: {\n        padding: \"1rem\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 5\n      }\n    }, \"Showing \", from, \" to \", to, \" of \", size, \" Results\");\n  };\n\n  var rowStyle = {\n    border: \"none\",\n    cursor: \"pointer\"\n  };\n  var rowEvent = {\n    onClick: function onClick(e, row, rowIndex) {\n      setDetails(row);\n      setShowCustomerDetails(function (prev) {\n        return !prev;\n      });\n    }\n  };\n  return /*#__PURE__*/React.createElement(ToolkitProvider, {\n    responsive: true,\n    keyField: \"id\",\n    data: data,\n    columns: columns,\n    exportCSV: {\n      fileName: \"wallet-transaction-data.csv\"\n    },\n    search: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 5\n    }\n  }, function (props) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table\",\n      style: {\n        marginTop: \"2rem\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"table_title\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }\n    }, \"Savings Transactions\"), /*#__PURE__*/React.createElement(Header, {\n      csvData: props.csvProps,\n      search: props.searchProps,\n      filter: Filter,\n      filtered: isfiltered,\n      dataLength: data.length,\n      SearchFilter: SearchFilter,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 11\n      }\n    }), !data ? /*#__PURE__*/React.createElement(Loader, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }\n    }) : /*#__PURE__*/React.createElement(BootstrapTable, Object.assign({}, props.baseProps, {\n      bootstrap4: true,\n      bordered: false,\n      rowEvents: rowEvent,\n      rowStyle: rowStyle,\n      pagination: paginationFactory({\n        sizePerPage: 9,\n        hideSizePerPage: true,\n        showTotal: true,\n        paginationTotalRenderer: customTotal\n      }),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }\n    })));\n  });\n};\n\nexport default Table;","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settladminfront-end/src/pages/dashboards/Wallet Savings /Table.js"],"names":["React","useState","BootstrapTable","paginationFactory","ToolkitProvider","Header","Loader","useAPI","Table","setShowCustomerDetails","setDetails","walletData","isfiltered","setIsFiltered","listOfSavingstrans","data","setData","console","log","currentDate","Date","currentDateFormat","setHours","SearchFilter","filter","name","product","transId","toLowerCase","startsWith","value","trim","customerId","Filter","check","status","length","startDate","endDate","setTimeout","filtered","productDate","transDate","includes","transStatus","columns","dataField","text","headerStyle","backgroundColor","border","fontSize","width","textAlign","formatter","cell","row","rowIndex","toLocaleString","style","margin","display","justifyContent","alignItems","padding","customTotal","from","to","size","rowStyle","cursor","rowEvent","onClick","e","prev","fileName","props","marginTop","csvProps","searchProps","baseProps","sizePerPage","hideSizePerPage","showTotal","paginationTotalRenderer"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport ToolkitProvider from \"react-bootstrap-table2-toolkit\";\n\nimport Header from \"./TableHeader\";\nimport Loader from \"../../../components/Loader\";\nimport { useAPI } from \"../../../contexts/WalletContext.js\";\n\nconst Table = ({setShowCustomerDetails, setDetails}) => {\n  const { walletData } = useAPI();\n  const [isfiltered, setIsFiltered] = useState(false);\n  const [data, setData] = useState(walletData.listOfSavingstrans);\n\n  console.log(walletData.listOfSavingstrans)\n  console.log(data);\n  \n  const currentDate = new Date();\n  const currentDateFormat = currentDate.setHours(0, 0, 0, 0);\n\n  const SearchFilter = (data) => {\n    let filter = walletData.listOfSavingstrans;\n    if (data.name === \"Transaction Refernce\") {\n      filter = walletData.listOfSavingstrans.filter((product) =>\n        product.transId.toLowerCase().startsWith(data.value.trim())\n      );\n    }\n    if (data.name === \"Customer's phone number\") {\n      filter = walletData.listOfSavingstrans.filter((product) =>\n        product.customerId.startsWith(data.value.trim())\n      );\n    }\n    setData(filter);\n  };\n  const Filter = (data) => {\n    setData(\"\");\n    const check =\n      data.status.length > 0 ||\n      data.startDate !== currentDateFormat ||\n      data.endDate !== currentDateFormat;\n\n    setTimeout(() => {\n      const filtered = walletData.listOfSavingstrans.filter((product) => {\n        console.log(product);\n        if (check) {\n          setIsFiltered(true);\n          const productDate = new Date(product.transDate).setHours(\n            0,\n            0,\n            0,\n            0\n          );\n          return (\n            data.status.includes(product.transStatus.toLowerCase()) ||\n            (productDate >= data.startDate && productDate <= data.endDate)\n          );\n        } else {\n          setIsFiltered(false);\n          return product;\n        }\n      });\n      setData(filtered);\n    }, 500);\n  };\n\n  const columns = [\n    {\n      dataField: \"id\",\n      text: \"#\",\n      headerStyle: {\n        backgroundColor: \"#F8F9FA\",\n        border: \"none\",\n        fontSize: \"12px\",\n        width: \"70px\",\n        textAlign: \"center\",\n      },\n      formatter: (cell, row, rowIndex) => {\n        return (\n          <span className=\"d-flex justify-content-center\">{rowIndex+1}</span>\n        );\n      },\n    },\n    {\n      dataField: \"fromcustomerName\",\n      text: \"Customer\",\n      headerStyle: {\n        backgroundColor: \"#F8F9FA\",\n        border: \"none\",\n        fontSize: \"12px\",\n      },\n    },\n    {\n      dataField: \"transAmount\",\n      text: \"Amount\",\n      headerStyle: {\n        backgroundColor: \"#F8F9FA\",\n        border: \"none\",\n        fontSize: \"12px\",\n      },\n      formatter: (cell) => <span>â‚¦{cell.toLocaleString()}</span>\n    },\n    {\n      dataField: \"transId\",\n      text: \"Tranx Ref\",\n      headerStyle: {\n        backgroundColor: \"#F8F9FA\",\n        border: \"none\",\n        fontSize: \"12px\",\n      },\n    },\n    {\n      dataField: \"customerId\",\n      text: \"Customer Phone Number\",\n      headerStyle: {\n        backgroundColor: \"#F8F9FA\",\n        border: \"none\",\n        fontSize: \"11px\",\n      },\n    },\n    {\n      dataField: \"transStatus\",\n      text: \"Status\",\n      headerStyle: {\n        backgroundColor: \"#F8F9FA\",\n        border: \"none\",\n        fontSize: \"12px\",\n        textAlign: \"center\",\n      },\n      style: () => {\n        return {\n          margin: \"auto 0\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          padding: \"20px 0\",\n        };\n      },\n      formatter: (cell, row, rowIndex) => {\n        if (cell.toLowerCase() === \"success\") {\n          return <span className=\" status success\">{cell}</span>;\n        }\n        if (cell.toLowerCase() === \"refunded\") {\n          return <span className=\"status registered\">{cell}</span>;\n        }\n        if (cell.toLowerCase() === \"failed\") {\n          return <span className=\"status failed\">{cell}</span>;\n        }\n      },\n    },\n  ];\n  const customTotal = (from, to, size) => (\n    <span\n      className=\"react-bootstrap-table-pagination-total\"\n      style={{\n        padding: \"1rem\",\n      }}\n    >\n      Showing {from} to {to} of {size} Results\n    </span>\n  );\n  const rowStyle = {\n    border: \"none\",\n    cursor: \"pointer\",\n  };\n\n  const rowEvent = {\n    onClick: (e, row, rowIndex) => {\n      setDetails(row);\n      setShowCustomerDetails((prev) => !prev);\n    },\n  };\n\n  return (\n    <ToolkitProvider\n      responsive\n      keyField=\"id\"\n      data={data}\n      columns={columns}\n      exportCSV={{\n        fileName: \"wallet-transaction-data.csv\",\n      }}\n      search\n    >\n      {(props) => (\n        <div\n          className=\"table\"\n          style={{\n            marginTop: \"2rem\",\n          }}\n        >\n          <p className=\"table_title\">Savings Transactions</p>\n          <Header\n            csvData={props.csvProps}\n            search={props.searchProps}\n            filter={Filter}\n            filtered={isfiltered}\n            dataLength={data.length}\n            SearchFilter={SearchFilter}\n          />\n          {!data ? (\n            <Loader />\n          ) : (\n            <BootstrapTable\n              {...props.baseProps}\n              bootstrap4\n              bordered={false}\n              rowEvents={rowEvent}\n              rowStyle={rowStyle}\n              pagination={paginationFactory({\n                sizePerPage: 9,\n                hideSizePerPage: true,\n                showTotal: true,\n                paginationTotalRenderer: customTotal,\n              })}\n            />\n          )}\n        </div>\n      )}\n    </ToolkitProvider>\n  );\n};\nexport default Table;\n"]},"metadata":{},"sourceType":"module"}