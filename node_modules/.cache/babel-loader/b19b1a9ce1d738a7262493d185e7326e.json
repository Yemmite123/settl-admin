{"ast":null,"code":"import _defineProperty from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Modal,ModalBody}from\"reactstrap\";import\"./ForgetPasword.scss\";import Loading from\"../../components/Loading\";import{Auth}from\"../../requests/auth\";import{connect}from\"react-redux\";import{ReactComponent as DangerIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/img/icons/danger.svg\";import{ReactComponent as Close}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/img/icons/close.svg\";import{TabContent,TabPane}from\"reactstrap\";import OtpInput from\"react-otp-input\";import SuccessDialog from\"../../pages/SuccessDialog\";import FailureDialog from\"../../pages/FailureDialog\";var ForgetPassword=/*#__PURE__*/function(_Component){_inherits(ForgetPassword,_Component);var _super=_createSuper(ForgetPassword);function ForgetPassword(props){var _this;_classCallCheck(this,ForgetPassword);_this=_super.call(this,props);_this.toggle=function(){_this.setState({modal:!_this.state.modal,activeTab:\"1\"});};_this.toggleModal=function(){_this.setState({isOpenModal:!_this.state.isOpenModal});};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_this.setState({loading:true});_context.next=4;return Auth(\"send/otp\",{email:_this.state.email,otpType:3});case 4:response=_context.sent;if(response.code===\"00\"){_this.setState({activeTab:\"2\"});_this.setState({isOpenModal:true});_this.setState({loading:false});}else{_this.setState({loading:false});_this.setState({emailError:response});}case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.verifyOTP=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_this.setState({loading:true});_context2.next=4;return Auth(\"verify/otp\",{email:_this.state.email,otpNumber:_this.state.value,phone:_this.props.phone});case 4:response=_context2.sent;if(response.code===\"00\"){window.location.pathname=\"/auth/set-new-password\";window.localStorage.setItem(\"emailAdress\",_this.state.email);window.localStorage.setItem(\"otp\",_this.state.value);_this.props.setUserDetails({otpNumber:_this.state.value});_this.setState({loading:false});}else{_this.setState({error:response});}case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.state={modal:false,activeTab:\"1\",value:\"\",email:\"\",loading:false,toggleBtn:false,isOpenModal:false,error:null,emailError:null,secondActiveTab:\"3\"};return _this;}_createClass(ForgetPassword,[{key:\"render\",value:function render(){var _ref3,_this2=this;var loading=this.state.loading;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"forget_login\",onClick:this.toggle,style:{cursor:\"pointer\"}},\"Forget pasword?\"),/*#__PURE__*/React.createElement(Modal,{id:\"modal_section\",isOpen:this.state.modal,toggle:this.toggle,size:\"lg\",centered:true},/*#__PURE__*/React.createElement(Close,{style:{position:\"absolute\",top:\"20px\",right:\"20px\",cursor:\"pointer\"},onClick:this.toggle}),/*#__PURE__*/React.createElement(TabContent,{activeTab:this.state.activeTab},/*#__PURE__*/React.createElement(TabPane,{tabId:\"1\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{\"data-test\":\"modal-header\",id:\"close\",className:\"modal-header\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"modal-title\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-center forget_pass_title\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Forgot Password\"))))),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(\"div\",{className:\"well\"},/*#__PURE__*/React.createElement(\"p\",null,\"Provide your admin email address, an OTP will be sent for verification\"),this.state.emailError&&/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center align-items-center mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center align-items-center\",style:(_ref3={backgroundColor:\"green\",padding:\"0.5rem\"},_defineProperty(_ref3,\"backgroundColor\",\"#ffc7ca\"),_defineProperty(_ref3,\"borderRadius\",\"10px\"),_defineProperty(_ref3,\"border\",\"1px solid #fc5159\"),_ref3)},/*#__PURE__*/React.createElement(DangerIcon,null),/*#__PURE__*/React.createElement(\"span\",{style:{color:\"#fc5159\",marginLeft:\"0.5rem\"}},this.state.email===\"\"?\"Please enter a valid email address\":this.state.emailError))),/*#__PURE__*/React.createElement(\"fieldset\",{className:\"float-label\"},/*#__PURE__*/React.createElement(\"input\",{name:\"Email address\",autoComplete:\"off\",type:\"text\",className:\"form-control shadow-none\",required:true,onChange:function onChange(e){return _this2.setState({email:e.target.value});}}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"Email_address\"},\"Email address\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"\",style:{margin:\"1rem\"}},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"forget-password\",disabled:loading,onClick:this.handleSubmit},loading?/*#__PURE__*/React.createElement(Loading,null):\"Continue\"))),/*#__PURE__*/React.createElement(TabPane,{tabId:\"2\"},/*#__PURE__*/React.createElement(SuccessDialog,{title:\"OTP code sent\",details:\"Check your email, we\\u2019ve sent you a code to reset your password\",isOpen:this.state.isOpenModal,toggle:this.toggleModal}),this.state.error&&/*#__PURE__*/React.createElement(FailureDialog,{isOpen:this.state.isOpenModal,toggle:this.toggleModal,title:\"Invalid OTP code\",details:this.state.error.message}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{\"data-test\":\"modal-header\",id:\"close\",className:\"modal-header\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"modal-title\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-center forget_pass_title\"},/*#__PURE__*/React.createElement(\"h1\",null,\"OTP Verification\"))))),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(\"div\",{className:\"well\"},/*#__PURE__*/React.createElement(\"p\",null,\"Enter the otp code sent to\"),/*#__PURE__*/React.createElement(\"p\",{style:{fontSize:\"17px\",fontWeight:\"500\"}},this.state.email),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},/*#__PURE__*/React.createElement(OtpInput,{shouldAutoFocus:true,className:\"otp_sty\",numInputs:6,value:this.state.value,otpType:\"password\",disabled:false,secure:true,onChange:function onChange(e){return _this2.setState({value:e});},separator:/*#__PURE__*/React.createElement(\"span\",null,\"  \"),isInputSecure:true})))),/*#__PURE__*/React.createElement(\"div\",{className:\"\",style:{margin:\"1rem\"}},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"forget-password\",onClick:this.verifyOTP},loading?/*#__PURE__*/React.createElement(Loading,null):\"Continue\"))))));}}]);return ForgetPassword;}(Component);var mapStateToProps=function mapStateToProps(state){var _state$user,_state$user$details,_state$user$details$a;return{phone:(_state$user=state.user)===null||_state$user===void 0?void 0:(_state$user$details=_state$user.details)===null||_state$user$details===void 0?void 0:(_state$user$details$a=_state$user$details.admin)===null||_state$user$details$a===void 0?void 0:_state$user$details$a.phoneNumber};};export default connect(mapStateToProps,null)(ForgetPassword);","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/src/components/Auth/ForgetPasword.js"],"names":["React","Component","Modal","ModalBody","Loading","Auth","connect","TabContent","TabPane","OtpInput","SuccessDialog","FailureDialog","ForgetPassword","props","toggle","setState","modal","state","activeTab","toggleModal","isOpenModal","handleSubmit","e","preventDefault","loading","email","otpType","response","code","emailError","verifyOTP","otpNumber","value","phone","window","location","pathname","localStorage","setItem","setUserDetails","error","toggleBtn","secondActiveTab","cursor","position","top","right","backgroundColor","padding","color","marginLeft","target","margin","message","fontSize","fontWeight","mapStateToProps","user","details","admin","phoneNumber"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Modal, ModalBody } from \"reactstrap\";\nimport \"./ForgetPasword.scss\";\nimport Loading from \"../../components/Loading\";\nimport { Auth } from \"../../requests/auth\"\nimport { connect } from \"react-redux\";\nimport { ReactComponent as DangerIcon } from \"../../assets/img/icons/danger.svg\";\nimport { ReactComponent as Close } from \"../../assets/img/icons/close.svg\";\nimport { TabContent, TabPane } from \"reactstrap\";\nimport OtpInput from \"react-otp-input\";\nimport SuccessDialog from \"../../pages/SuccessDialog\";\nimport FailureDialog from \"../../pages/FailureDialog\";\nclass ForgetPassword extends Component {\n  constructor(props) {\n      super(props);\n      this.state = {\n        modal: false,\n        activeTab: \"1\",\n        value: \"\",\n        email: \"\",\n        loading: false,\n        toggleBtn:  false,\n        isOpenModal:  false,\n        error:null,\n        emailError: null,\n        secondActiveTab: \"3\"\n        \n      };\n\n  }\n \n  toggle = () => {\n    this.setState({\n      modal: !this.state.modal,\n      activeTab: \"1\",\n    });\n  };\n\n toggleModal = () => {\n   this.setState({\n   isOpenModal: !this.state.isOpenModal,\n\n  })\n}\n\n\n  handleSubmit = async (e) => {\n    e.preventDefault();\n   \n   \n    this.setState({loading: true})\n   const response = await Auth(\"send/otp\", {email: this.state.email, otpType: 3});\n\n   if(response.code === \"00\") {\n     this.setState({ activeTab: \"2\" })\n     this.setState({isOpenModal: true})\n     this.setState({loading: false})\n\n   }else{\n     this.setState({loading: false})\n     this.setState({emailError:response})\n   }\n  }\n\n  verifyOTP = async (e) => {\n     e.preventDefault();\n     \n     this.setState({loading: true})\n     const response = await Auth(\"verify/otp\", {email: this.state.email, otpNumber:this.state.value, phone:this.props.phone});\n     if(response.code === \"00\") {\n      window.location.pathname = \"/auth/set-new-password\"\n      window.localStorage.setItem(\"emailAdress\", this.state.email)\n      window.localStorage.setItem(\"otp\",this.state.value )\n      this.props.setUserDetails({ otpNumber:this.state.value})\n      this.setState({loading: false})\n    }else{\n      this.setState({error:response})\n    }\n  }\n\n  render() {\n    const {loading} = this.state\n    return (\n      <div>\n        <span\n          className=\"forget_login\"\n          onClick={this.toggle}\n          style={{ cursor: \"pointer\" }}\n        >\n          Forget pasword?\n        </span>\n        <Modal\n          id=\"modal_section\"\n          isOpen={this.state.modal}\n          toggle={this.toggle}\n          size=\"lg\"\n          centered\n        >\n          <Close\n            style={{\n              position: \"absolute\",\n              top: \"20px\",\n              right: \"20px\",\n              cursor: \"pointer\",\n\n            }}\n            onClick={this.toggle}\n          />\n\n          <TabContent activeTab={this.state.activeTab}>\n            <TabPane tabId=\"1\">\n              <div>\n                <div\n                  data-test=\"modal-header\"\n                  id=\"close\"\n                  className=\"modal-header\"\n                >\n                  <h4 className=\"modal-title\">\n                    <div className=\"text-center forget_pass_title\">\n                      <h1>Forgot Password</h1>\n                    </div>\n                  </h4>\n                </div>\n              </div>\n              <ModalBody>\n                <div className=\"well\">\n                  <p>\n                  Provide your admin email address, an OTP will be sent for verification\n                  </p>\n                  {this.state.emailError && (\n                      <div className=\"d-flex justify-content-center align-items-center mt-3\">\n                       <div\n                      className=\"d-flex justify-content-center align-items-center\"\n                      style={{\n                        backgroundColor: \"green\",\n                        padding: \"0.5rem\",\n                        backgroundColor: \"#ffc7ca\",\n                        borderRadius: \"10px\",\n                        border: \"1px solid #fc5159\",\n                      }}\n                    >\n                      <DangerIcon />\n                      <span style={{ color: \"#fc5159\", marginLeft: \"0.5rem\" }}>\n                         {this.state.email  === \"\"? \"Please enter a valid email address\": this.state.emailError }\n                      </span>\n                    </div>\n                  </div>\n                )}\n                  \n                  <fieldset className=\"float-label\">\n                    <input\n                      name=\"Email address\"\n                      autoComplete=\"off\"\n                      type=\"text\"\n                      className=\"form-control shadow-none\"\n                      required\n                      onChange={(e) => this.setState({email: e.target.value})}\n                    />\n                    <label htmlFor=\"Email_address\">Email address</label>\n                  </fieldset>\n                \n                  \n                </div>\n              </ModalBody>\n              <div\n                className=\"\"\n                style={{\n                  margin: \"1rem\",\n                }}\n              >\n                <button\n                  type=\"submit\"\n                  className=\"forget-password\"\n                  disabled={loading}\n                  onClick = {this.handleSubmit}\n                >\n                  {loading ? <Loading /> : \"Continue\"}\n                </button>\n              \n              </div>\n            </TabPane>\n          \n            <TabPane tabId=\"2\"> \n            <SuccessDialog title=\"OTP code sent\" details=\"Check your email, weâ€™ve sent you a code to reset your password\" isOpen={this.state.isOpenModal} \n            toggle={this.toggleModal}/>\n            {\n              this.state.error && (\n                <FailureDialog\n                isOpen={this.state.isOpenModal} \n                toggle={this.toggleModal}\n                title=\"Invalid OTP code\"\n                details={this.state.error.message}\n      />\n              )\n            }\n            \n              <div>\n              \n                <div\n                  data-test=\"modal-header\"\n                  id=\"close\"\n                  className=\"modal-header\"\n                >\n                  <h4 className=\"modal-title\">\n                    <div className=\"text-center forget_pass_title\">\n                      <h1>OTP Verification</h1>\n                    </div>\n                  </h4>\n                </div>\n              </div>\n              <ModalBody>\n                <div className=\"well\">\n                  <p>Enter the otp code sent to</p>\n                  <p style={{fontSize: \"17px\", fontWeight: \"500\"}}>{this.state.email}</p>\n                \n                  <div className=\"d-flex justify-content-center\">\n                    <OtpInput\n                      shouldAutoFocus\n                      className=\"otp_sty\"\n                      numInputs={6}\n                      value={this.state.value}\n                      otpType=\"password\"\n                      disabled={false}\n                      secure={true}\n                      onChange={(e) => this.setState({ value: e})}\n                      separator={<span>{\"  \"}</span>}\n                      isInputSecure\n                    />\n                  </div>\n                \n                </div>\n              </ModalBody>\n              <div\n                className=\"\"\n                style={{\n                  margin: \"1rem\",\n                }}\n              >\n                <button type=\"submit\" className=\"forget-password\" onClick={this.verifyOTP}>\n                  {loading ? <Loading /> : \"Continue\"}\n                </button>\n              </div>\n            </TabPane>\n          </TabContent>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  phone: state.user?.details?.admin?.phoneNumber\n})\n\n\n\nexport default connect(mapStateToProps, null)(ForgetPassword)\n"]},"metadata":{},"sourceType":"module"}