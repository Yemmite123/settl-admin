{"ast":null,"code":"import _regeneratorRuntime from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Badge}from\"reactstrap\";import BootstrapTable from\"react-bootstrap-table-next\";import paginationFactory from\"react-bootstrap-table2-paginator\";import ToolkitProvider from'react-bootstrap-table2-toolkit';import Loader from\"./../../components/Loader\";import MessageTableHeader from\"./MessageTableHeader\";import messageRequest from\"../../requests/message\";var tableColumns=[{dataField:\"date\",text:\"Date\",formatter:function formatter(cell,row,rowIndex){return cell.slice(0,-5);}},{dataField:\"messageTypes\",text:\"Type\"},{dataField:\"sender\",text:\"Sender\"},{dataField:\"messageTitle\",text:\"Title\"},{dataField:\"messageDescription\",text:\"Message\"},{dataField:\"status\",text:\"Status\",headerClasses:\"text-center\",formatter:function formatter(cell,row,rowIndex){if(cell.toLowerCase()===\"sent\"){return/*#__PURE__*/React.createElement(Badge,{color:\"secondary\",className:\"badge-active\"},cell);}if(cell.toLowerCase()===\"draft\"){return/*#__PURE__*/React.createElement(Badge,{color:\"secondary\",className:\"badge-pending\"},cell);}if(cell.toLowerCase()===\"failed\"){return/*#__PURE__*/React.createElement(Badge,{color:\"secondary\",className:\"badge-unresolved\"},cell);}}}];export default function MessageTable(_ref){var setShowMessageDetails=_ref.setShowMessageDetails,setDetails=_ref.setDetails;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isfiltered=_useState2[0],setIsFiltered=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),tableData=_useState6[0],setTableData=_useState6[1];var _messageRequest=messageRequest(),getAllMessages=_messageRequest.getAllMessages;var getRecentMessagesList=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getAllMessages();case 2:response=_context.sent;if(response.code===\"00\"){console.log(response.data);setData(response.data);setTableData(response.data);}case 4:case\"end\":return _context.stop();}}},_callee);}));return function getRecentMessagesList(){return _ref2.apply(this,arguments);};}();useEffect(function(){getRecentMessagesList();},[]);var Filter=function Filter(data){setData(\"\");var check=data.status.length>0;setTimeout(function(){var filtered=tableData.filter(function(product){if(check){setIsFiltered(true);return data.status.includes(product.status.toLowerCase());}else{setIsFiltered(false);return product;}});setData(filtered);},500);};var customTotal=function customTotal(from,to,size){return/*#__PURE__*/React.createElement(\"span\",{className:\"react-bootstrap-table-pagination-total\"},\"Showing \",from,\" to \",to,\" of \",size,\" Results\");};var rowEvents={onClick:function onClick(e,row,rowIndex){setDetails(row);setShowMessageDetails(function(prev){return!prev;});}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"admin-table message-table mt-4\"},/*#__PURE__*/React.createElement(ToolkitProvider,{keyField:\"id\",data:data,columns:tableColumns},function(props){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(MessageTableHeader,{filter:Filter,filtered:isfiltered,dataLength:data.length}),!data?/*#__PURE__*/React.createElement(Loader,null):/*#__PURE__*/React.createElement(BootstrapTable,Object.assign({bootstrap4:true,bordered:false,rowEvents:rowEvents,wrapperClasses:\"table-responsive\",pagination:paginationFactory({sizePerPage:9,hideSizePerPage:true,showTotal:true,paginationTotalRenderer:customTotal})},props.baseProps)));})));}","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/src/pages/messaging/MessageTable.js"],"names":["React","useState","useEffect","Badge","BootstrapTable","paginationFactory","ToolkitProvider","Loader","MessageTableHeader","messageRequest","tableColumns","dataField","text","formatter","cell","row","rowIndex","slice","headerClasses","toLowerCase","MessageTable","setShowMessageDetails","setDetails","isfiltered","setIsFiltered","data","setData","tableData","setTableData","getAllMessages","getRecentMessagesList","response","code","console","log","Filter","check","status","length","setTimeout","filtered","filter","product","includes","customTotal","from","to","size","rowEvents","onClick","e","prev","props","sizePerPage","hideSizePerPage","showTotal","paginationTotalRenderer","baseProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Badge  } from \"reactstrap\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport ToolkitProvider from 'react-bootstrap-table2-toolkit';\nimport Loader from \"./../../components/Loader\";\nimport MessageTableHeader from \"./MessageTableHeader\";\nimport messageRequest from \"../../requests/message\";\n\n\nconst tableColumns = [\n    {\n      dataField: \"date\",\n      text: \"Date\",\n      formatter: (cell, row, rowIndex) => {\n        return cell.slice(0, -5);\n      }\n    },\n    {\n        dataField: \"messageTypes\",\n        text: \"Type\"\n    },\n    {\n        dataField: \"sender\",\n        text: \"Sender\"\n    },\n    {\n        dataField: \"messageTitle\",\n        text: \"Title\"\n    },\n    {\n        dataField: \"messageDescription\",\n        text: \"Message\",\n    },\n    {\n      dataField: \"status\",\n      text: \"Status\",\n      headerClasses: \"text-center\",\n      formatter: (cell, row, rowIndex) => {\n        if (cell.toLowerCase() === \"sent\") {\n            return <Badge color=\"secondary\" className=\"badge-active\">{cell}</Badge>\n        }\n        if (cell.toLowerCase() === \"draft\") {\n            return <Badge color=\"secondary\" className=\"badge-pending\">{cell}</Badge>\n        }\n        if (cell.toLowerCase() === \"failed\") {\n            return <Badge color=\"secondary\" className=\"badge-unresolved\">{cell}</Badge>\n        }\n      }\n    }\n];\n\nexport default function MessageTable({setShowMessageDetails, setDetails}) {\n    const [isfiltered, setIsFiltered] = useState(false);\n    const [data, setData] = useState(\"\");\n    const [tableData, setTableData] = useState(\"\");\n\n    const { getAllMessages } = messageRequest();\n\n    const getRecentMessagesList = async() => {\n        const response = await getAllMessages();\n        if(response.code === \"00\") {\n          console.log(response.data);\n          setData(response.data);\n          setTableData(response.data);\n        }\n    }\n\n    useEffect(() => {\n        getRecentMessagesList();\n    }, []);\n\n    const Filter = (data) => {\n        setData(\"\");\n        const check = data.status.length > 0\n    \n        setTimeout(() => {\n          const filtered = tableData.filter((product) => {\n            if (check) {\n              setIsFiltered(true);\n              return (\n                data.status.includes(product.status.toLowerCase())\n              );\n            } else {\n              setIsFiltered(false);\n              return product;\n            }\n          });\n          setData(filtered);\n        }, 500);\n    };\n\n    const customTotal = (from, to, size) => (\n        <span className=\"react-bootstrap-table-pagination-total\">\n            Showing { from } to { to } of { size } Results\n        </span>\n    );\n\n    const rowEvents = {\n        onClick:  (e, row, rowIndex) => {\n            setDetails(row);\n            setShowMessageDetails((prev) => !prev);\n        }\n    }\n\n    return(\n        <>\n            <div className=\"admin-table message-table mt-4\">\n                <ToolkitProvider\n                    keyField=\"id\"\n                    data={data}\n                    columns={tableColumns}\n                >\n                    {\n                        props => (\n                        <div>\n                            <MessageTableHeader\n                                filter={Filter}\n                                filtered={isfiltered}\n                                dataLength={data.length}\n                            />\n                            {!data ? (\n                                <Loader />\n                            ) :(\n                                <BootstrapTable\n                                    bootstrap4\n                                    bordered={false}\n                                    rowEvents={rowEvents}\n                                    wrapperClasses=\"table-responsive\"\n                                    pagination={paginationFactory({\n                                        sizePerPage: 9,\n                                        hideSizePerPage: true,\n                                        showTotal: true,\n                                        paginationTotalRenderer: customTotal,\n                                    })}\n                                    { ...props.baseProps }\n                                />\n                            )}\n                        </div>)\n                    }\n                </ToolkitProvider>\n            </div>\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}