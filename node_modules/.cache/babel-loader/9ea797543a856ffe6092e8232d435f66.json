{"ast":null,"code":"import _slicedToArray from \"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/src/pages/customers/settl-customers/WalletTransactionHistoryTable.js\";\nimport React, { useState, createRef, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport ToolkitProvider from \"react-bootstrap-table2-toolkit\";\nimport WalletTransactionHistoryTableHeader from \"./WalletTransactionHistoryTableHeader\";\nimport Loader from \"../../../components/Loader\";\nimport actionIcon from \"../../../assets/img/icons/threedots.svg\";\nimport { DropdownMenu, DropdownToggle, Dropdown, DropdownItem } from \"reactstrap\";\nimport CreditWalletDialog from \"../CreditWalletDialog\";\nimport DebitWalletDialog from \"../DebitWalletDialog\";\nimport Moment from \"react-moment\";\nexport default function WalletTransactionHistoryTable(_ref) {\n  var _this = this;\n\n  var tableData = _ref.tableData;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isfiltered = _useState2[0],\n      setIsFiltered = _useState2[1];\n\n  var _useState3 = useState(tableData),\n      _useState4 = _slicedToArray(_useState3, 2),\n      data = _useState4[0],\n      setData = _useState4[1];\n\n  var currentDate = new Date();\n  var currentDateFormat = currentDate.setHours(0, 0, 0, 0);\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentTransId = _useState6[0],\n      setCurrentTransId = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      currentAmount = _useState8[0],\n      setCurrentAmount = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      index = _useState10[0],\n      setIndex = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      debitModal = _useState12[0],\n      setDebitModal = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      creditModal = _useState14[0],\n      setCreditModal = _useState14[1];\n\n  var toggleCreditModal = function toggleCreditModal() {\n    return setCreditModal(!creditModal);\n  };\n\n  var toggleDebitModal = function toggleDebitModal() {\n    return setDebitModal(!debitModal);\n  };\n\n  var itemOne = createRef();\n  var itemTwo = createRef();\n  useEffect(function () {\n    var option1 = ReactDOM.findDOMNode(itemOne === null || itemOne === void 0 ? void 0 : itemOne.current);\n    var option2 = ReactDOM.findDOMNode(itemTwo === null || itemTwo === void 0 ? void 0 : itemTwo.current);\n\n    if (option1) {\n      option1.addEventListener(\"click\", function () {\n        setCreditModal(true);\n      });\n    }\n\n    if (option2) {\n      option2.addEventListener(\"click\", function () {\n        setDebitModal(true);\n      });\n    }\n  }, [itemOne, itemTwo]);\n  var customerTrans = data.map(function (dat) {\n    return dat.transId;\n  });\n  var customerAmount = data.map(function (amount) {\n    return amount.transAmount;\n  });\n  var fullName = data.map(function (customerDetail) {\n    return customerDetail.tocustomerName;\n  });\n  var customerPhone = data.map(function (customerDetail) {\n    return customerDetail.tocustomerId;\n  });\n\n  var Filter = function Filter(data) {\n    setData(\"\");\n    var check = data.source.length > 0 || data.endDate !== currentDateFormat || data.startDate !== currentDateFormat;\n    setTimeout(function () {\n      var filtered = tableData.filter(function (product) {\n        if (check) {\n          setIsFiltered(true);\n          var dataDate = new Date(product.transDate).setHours(0, 0, 0, 0);\n          return data.source.includes(product.fundSource.toLowerCase()) || dataDate >= data.startDate && dataDate <= data.endDate;\n        } else {\n          setIsFiltered(false);\n          return product;\n        }\n      });\n      setData(filtered);\n    }, 500);\n  };\n\n  var tableColumns = [{\n    dataField: \"transDate\",\n    text: \"Date\",\n    formatter: function formatter(cell, row, rowIndex) {\n      return /*#__PURE__*/React.createElement(Moment, {\n        format: \"DD/MM/YYYY HH:mm\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 43\n        }\n      }, cell);\n    }\n  }, {\n    dataField: \"fundSource\",\n    text: \"Wallet Type\"\n  }, {\n    dataField: \"transId\",\n    text: \"Tranx Ref.\"\n  }, {\n    dataField: \"transType\",\n    text: \"Tranx Type\"\n  }, {\n    dataField: \"transAmount\",\n    text: \"Amount\",\n    classes: \"text-right\",\n    headerClasses: \"text-right\",\n    formatter: function formatter(cell, row, rowIndex) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 43\n        }\n      }, \"\\u20A6\", cell);\n    }\n  }, {\n    dataField: \"transChannel\",\n    text: \"Payment Source\"\n  }, {\n    dataField: \"!\",\n    text: \"\",\n    headerStyle: {\n      backgroundColor: \"#fdfcff\",\n      borderBottom: \"none\",\n      width: \"20px\"\n    },\n    style: function style() {\n      return {\n        cursor: \"pointer\"\n      };\n    },\n    formatter: function formatter(cell, row, rowIndex) {\n      return /*#__PURE__*/React.createElement(Dropdown, {\n        isOpen: data[rowIndex].dropdown,\n        toggle: function toggle() {\n          return setIndex(null);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(DropdownToggle, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: actionIcon,\n        alt: \"actionIcon\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 15\n        }\n      })), rowIndex == index && /*#__PURE__*/React.createElement(DropdownMenu, {\n        style: {\n          left: \"-100px\"\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(DropdownItem, {\n        className: \"item\",\n        ref: itemOne,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 17\n        }\n      }, \"Credit Wallet\"), /*#__PURE__*/React.createElement(DropdownItem, {\n        ref: itemTwo,\n        className: \"item\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 17\n        }\n      }, \"Debit Wallet\")));\n    },\n    events: {\n      onClick: function onClick(e, column, columnIndex, row, rowIndex) {\n        setIndex(rowIndex);\n        setCurrentTransId(customerTrans[rowIndex]);\n        setCurrentAmount(customerAmount[rowIndex]);\n        data[rowIndex].dropdown = true;\n      }\n    }\n  }];\n\n  var customTotal = function customTotal(from, to, size) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"react-bootstrap-table-pagination-total\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 5\n      }\n    }, \"Showing \", from, \" to \", to, \" of \", size, \" Results\");\n  };\n\n  var rowEvents = {\n    onClick: function onClick(e, row, rowIndex) {\n      console.log(rowIndex);\n    }\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"admin-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"all-admins\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  }, \"Transaction History\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"admin-table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ToolkitProvider, {\n    responsive: true,\n    keyField: \"id\",\n    data: data,\n    columns: tableColumns,\n    exportCSV: {\n      fileName: \"wallet transaction history data.csv\"\n    },\n    search: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, function (props) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(WalletTransactionHistoryTableHeader, {\n      csvData: props.csvProps,\n      filter: Filter,\n      filtered: isfiltered,\n      dataLength: data.length,\n      search: props.searchProps,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 19\n      }\n    }), !data ? /*#__PURE__*/React.createElement(Loader, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 21\n      }\n    }) : /*#__PURE__*/React.createElement(BootstrapTable, Object.assign({\n      bootstrap4: true,\n      bordered: false,\n      wrapperClasses: \"table-responsive\",\n      rowEvents: rowEvents,\n      pagination: paginationFactory({\n        sizePerPage: 9,\n        hideSizePerPage: true,\n        showTotal: true,\n        paginationTotalRenderer: customTotal\n      })\n    }, props.baseProps, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 21\n      }\n    })));\n  })))), /*#__PURE__*/React.createElement(CreditWalletDialog, {\n    isOpen: creditModal,\n    toggle: toggleCreditModal,\n    transRef: currentTransId,\n    amount: currentAmount,\n    fullName: fullName[0],\n    phoneNo: customerPhone[0],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(DebitWalletDialog, {\n    transRef: currentTransId,\n    amount: currentAmount,\n    fullName: fullName[0],\n    phoneNo: customerPhone[0],\n    isOpen: debitModal,\n    toggle: toggleDebitModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/UPDATED SETTL ADMIN BACKOFFICE /settl-backoffice/src/pages/customers/settl-customers/WalletTransactionHistoryTable.js"],"names":["React","useState","createRef","useEffect","ReactDOM","BootstrapTable","paginationFactory","ToolkitProvider","WalletTransactionHistoryTableHeader","Loader","DropdownMenu","DropdownToggle","Dropdown","DropdownItem","CreditWalletDialog","DebitWalletDialog","Moment","WalletTransactionHistoryTable","tableData","isfiltered","setIsFiltered","data","setData","currentDate","Date","currentDateFormat","setHours","currentTransId","setCurrentTransId","currentAmount","setCurrentAmount","index","setIndex","debitModal","setDebitModal","creditModal","setCreditModal","toggleCreditModal","toggleDebitModal","itemOne","itemTwo","option1","findDOMNode","current","option2","addEventListener","customerTrans","map","dat","transId","customerAmount","amount","transAmount","fullName","customerDetail","tocustomerName","customerPhone","tocustomerId","Filter","check","source","length","endDate","startDate","setTimeout","filtered","filter","product","dataDate","transDate","includes","fundSource","toLowerCase","tableColumns","dataField","text","formatter","cell","row","rowIndex","classes","headerClasses","headerStyle","backgroundColor","borderBottom","width","style","cursor","dropdown","actionIcon","left","events","onClick","e","column","columnIndex","customTotal","from","to","size","rowEvents","console","log","fileName","props","csvProps","searchProps","sizePerPage","hideSizePerPage","showTotal","paginationTotalRenderer","baseProps"],"mappings":"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","sourcesContent":["import React, { useState, createRef, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport ToolkitProvider from \"react-bootstrap-table2-toolkit\";\nimport WalletTransactionHistoryTableHeader from \"./WalletTransactionHistoryTableHeader\";\nimport Loader from \"../../../components/Loader\";\nimport actionIcon from \"../../../assets/img/icons/threedots.svg\";\nimport {\n  DropdownMenu,\n  DropdownToggle,\n  Dropdown,\n  DropdownItem,\n} from \"reactstrap\";\nimport CreditWalletDialog from \"../CreditWalletDialog\";\nimport DebitWalletDialog from \"../DebitWalletDialog\";\nimport Moment from \"react-moment\";\n\nexport default function WalletTransactionHistoryTable({ tableData }) {\n  const [isfiltered, setIsFiltered] = useState(false);\n  const [data, setData] = useState(tableData);\n  const currentDate = new Date();\n  const currentDateFormat = currentDate.setHours(0, 0, 0, 0);\n\n  const [currentTransId, setCurrentTransId] = useState(\"\");\n  const [currentAmount, setCurrentAmount] = useState(\"\");\n  const [index, setIndex] = useState(null);\n  const [debitModal, setDebitModal] = useState(false);\n  const [creditModal, setCreditModal] = useState(false);\n\n  const toggleCreditModal = () => setCreditModal(!creditModal);\n  const toggleDebitModal = () => setDebitModal(!debitModal);\n\n  const itemOne = createRef();\n  const itemTwo = createRef();\n  useEffect(() => {\n    let option1 = ReactDOM.findDOMNode(itemOne?.current);\n    let option2 = ReactDOM.findDOMNode(itemTwo?.current);\n    if (option1) {\n      option1.addEventListener(\"click\", () => {\n        setCreditModal(true);\n      });\n    }\n    if (option2) {\n      option2.addEventListener(\"click\", () => {\n        setDebitModal(true);\n      });\n    }\n  }, [itemOne, itemTwo]);\n\n  const customerTrans = data.map(dat => dat.transId);\n  const customerAmount = data.map(amount => amount.transAmount);\n\n const fullName =  data.map(customerDetail => customerDetail.tocustomerName)\n const  customerPhone=  data.map(customerDetail => customerDetail.tocustomerId)\n \n \n\n  const Filter = (data) => {\n    setData(\"\");\n    const check =\n      data.source.length > 0 ||\n      data.endDate !== currentDateFormat ||\n      data.startDate !== currentDateFormat;\n\n    setTimeout(() => {\n      const filtered = tableData.filter((product) => {\n        if (check) {\n          setIsFiltered(true);\n          const dataDate = new Date(product.transDate).setHours(0, 0, 0, 0);\n          return (\n            data.source.includes(product.fundSource.toLowerCase()) ||\n            (dataDate >= data.startDate && dataDate <= data.endDate)\n          );\n        } else {\n          setIsFiltered(false);\n          return product;\n        }\n      });\n      setData(filtered);\n    }, 500);\n  };\n  const tableColumns = [\n    {\n      dataField: \"transDate\",\n      text: \"Date\",\n      formatter: (cell, row, rowIndex) => <Moment format=\"DD/MM/YYYY HH:mm\">{cell}</Moment>\n    },\n    {\n      dataField: \"fundSource\",\n      text: \"Wallet Type\",\n    },\n    {\n      dataField: \"transId\",\n      text: \"Tranx Ref.\",\n    },\n    {\n      dataField: \"transType\",\n      text: \"Tranx Type\",\n    },\n    {\n      dataField: \"transAmount\",\n      text: \"Amount\",\n      classes: \"text-right\",\n      headerClasses: \"text-right\",\n      formatter: (cell, row, rowIndex) => <span>â‚¦{cell}</span>,\n    },\n    {\n      dataField: \"transChannel\",\n      text: \"Payment Source\",\n    },\n    {\n      dataField: \"!\",\n      text: \"\",\n      headerStyle: {\n        backgroundColor: \"#fdfcff\",\n        borderBottom: \"none\",\n        width: \"20px\",\n      },\n      style: () => ({\n        cursor: \"pointer\",\n      }),\n      formatter: (cell, row, rowIndex) => {\n        return (\n          <Dropdown\n            isOpen={data[rowIndex].dropdown}\n            toggle={() => setIndex(null)}\n          >\n            <DropdownToggle>\n              <img src={actionIcon} alt=\"actionIcon\" />\n            </DropdownToggle>\n            {rowIndex == index && (\n              <DropdownMenu\n                style={{\n                  left: \"-100px\",\n                }}\n              >\n                <DropdownItem className=\"item\" ref={itemOne}>\n                  Credit Wallet\n                </DropdownItem>\n                <DropdownItem ref={itemTwo} className=\"item\">\n                  Debit Wallet\n                </DropdownItem>\n              </DropdownMenu>\n            )}\n          </Dropdown>\n        );\n      },\n      events: {\n        onClick: (e, column, columnIndex, row, rowIndex) => {\n          setIndex(rowIndex);\n          setCurrentTransId(customerTrans[rowIndex]);\n          setCurrentAmount(customerAmount[rowIndex]);\n          data[rowIndex].dropdown = true;\n        },\n      },\n    },\n  ];\n  const customTotal = (from, to, size) => (\n    <span className=\"react-bootstrap-table-pagination-total\">\n      Showing {from} to {to} of {size} Results\n    </span>\n  );\n\n  const rowEvents = {\n    onClick: (e, row, rowIndex) => {\n      console.log(rowIndex);\n    },\n  };\n\n  return (\n    <>\n      <div className=\"admin-body\">\n        <div className=\"all-admins\">\n          <h6>Transaction History</h6>\n          <div className=\"admin-table\">\n            <ToolkitProvider\n              responsive\n              keyField=\"id\"\n              data={data}\n              columns={tableColumns}\n              exportCSV={{\n                fileName: \"wallet transaction history data.csv\",\n              }}\n              search\n            >\n              {(props) => (\n                <div>\n                  <WalletTransactionHistoryTableHeader\n                    csvData={props.csvProps}\n                    filter={Filter}\n                    filtered={isfiltered}\n                    dataLength={data.length}\n                    search={props.searchProps}\n                  />\n                  {!data ? (\n                    <Loader />\n                  ) : (\n                    <BootstrapTable\n                      bootstrap4\n                      bordered={false}\n                      wrapperClasses=\"table-responsive\"\n                      rowEvents={rowEvents}\n                      pagination={paginationFactory({\n                        sizePerPage: 9,\n                        hideSizePerPage: true,\n                        showTotal: true,\n                        paginationTotalRenderer: customTotal,\n                      })}\n                      {...props.baseProps}\n                    />\n                  )}\n                </div>\n              )}\n            </ToolkitProvider>\n          </div>\n        </div>\n      </div>\n      <CreditWalletDialog\n        isOpen={creditModal}\n        toggle={toggleCreditModal}\n        transRef={currentTransId}\n        amount={currentAmount}\n        fullName={fullName[0]}\n        phoneNo = {customerPhone[0]}\n      />\n      <DebitWalletDialog\n       transRef={currentTransId}\n       amount={currentAmount}\n       fullName={fullName[0]}\n       phoneNo = {customerPhone[0]}\n      isOpen={debitModal} \n      toggle={toggleDebitModal} />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}